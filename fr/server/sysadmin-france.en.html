
<p><hr>
Node:<a name="Top">Top</a>,
Next:<a rel=next href="#Introduction">Introduction</a>,
Previous:<a rel=previous href="#(dir)">(dir)</a>,
Up:<a rel=up href="#(dir)">(dir)</a>
<br>

<h1>Sysadmin France</h1>

<p>This document is for system administrators, webmasters and users of GNU
and FSF machines in France.

<ul>
<li><a href="#Introduction">Introduction</a>: 
<li><a href="#XML%20and%20interoperability">XML and interoperability</a>: 
<li><a href="#Accounts">Accounts</a>: 
<li><a href="#Web">Web</a>: 
<li><a href="#Private%20Data">Private Data</a>: 
<li><a href="#System">System</a>: 
<li><a href="#Concept%20Index">Concept Index</a>: 
<li><a href="#Name%20Index">Name Index</a>:

<p>--- The Detailed Node Listing ---

<p>Accounts

</p><li><a href="#System%20Passwords">System Passwords</a>: 
<li><a href="#Account%20Create">Account Create</a>: 
<li><a href="#Account%20Access">Account Access</a>: 
<li><a href="#Account%20Update">Account Update</a>: 
<li><a href="#Account%20Delete">Account Delete</a>: 
<li><a href="#Cron%20Job">Cron Job</a>:

<p>Web

</p><li><a href="#Overview">Overview</a>: 
<li><a href="#Virtual%20Hosts">Virtual Hosts</a>: 
<li><a href="#Editing%20the%20Web">Editing the Web</a>: 
<li><a href="#Separate%20layout%20and%20content">Separate layout and content</a>: 
<li><a href="#Update%20from%20CVS">Update from CVS</a>: 
<li><a href="#Nightly%20script">Nightly script</a>: 
<li><a href="#Immediate%20Update">Immediate Update</a>:

<p>Separate layout and content

</p><li><a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>: 
<li><a href="#XSLT%20processors">XSLT processors</a>: 
<li><a href="#Writing%20XHTML%20content">Writing XHTML content</a>: 
<li><a href="#XSL%20and%20generated%20HTML">XSL and generated HTML</a>: 
<li><a href="#Writing%20XSL%20files">Writing XSL files</a>:

<p>System

</p><li><a href="#Security">Security</a>: 
<li><a href="#DNS">DNS</a>: 
<li><a href="#Statistics">Statistics</a>:

<p>Security

</p><li><a href="#Firewall">Firewall</a>:

<p>Statistics

</p><li><a href="#Installation">Installation</a>: 
<li><a href="#Output">Output</a>:

</ul>

<p><hr>
Node:<a name="Introduction">Introduction</a>,
Next:<a rel=next href="#XML%20and%20interoperability">XML and interoperability</a>,
Previous:<a rel=previous href="#Top">Top</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>Introduction</h1>

<p>No information on the philosophical and political goals of the
<a href="http://www.fsfeurope.org/">FSF Europe</a> in general and the
<a href="http://france.fsfeurope.org/">FSF France</a> in particular can be
found in this document.

<p>The machines donated to FSF France and hosted in France are part of the
set of machines available to the GNU project. As such they follow the
same rules and the same policy.

<p>In many aspects, the GNU way of doing things needs to be improved. When
this is the case the idea is to coordinate with the GNU volunteers in
charge of a specific aspect in order to improve the system. Doing so is
a lot easier than contributing to a software. It may sometime be
furstrating to stick to the GNU policy because it is easier to have a
quick and nice result by inventing something completly new. The Web is
probably the most striking example. However, since we claim to be part
of the GNU project we don't really have the option to fork something of
our own and leave the GNU project behind. Even if it means that we will
go slower, coordination with and improvement of the GNU project as a
whole should be our goal.

<p>Close cooperation with the GNU project also makes some things a lot
easier. The account creation process, the management of the HTML tree
from CVS, the DNS hosting, mailing lists etc. are facilities we do not
need to re-implement. When installing something entirely new on the FSF
France machines, it is important to send a note on the relevant mailing
lists in advance. This prevents possible duplication of the effort and
greatly increases the chances that the GNU project will be able to
re-use the new facility.

<p>Reference documents describing the GNU environment are
<a href="http://www.gnu.org/server/standards/">standards</a> for webmaster
information, <code>fencepost.gnu.org:/gd/gnuorg/sysadmin/sysadmin.texi</code>
for system administration information and the
<a href="http://savannah.gnu.org/savannah.html">Savannah admin guide</a> for
usage of the SourceForge clone.

<p><hr>
Node:<a name="XML%20and%20interoperability">XML and interoperability</a>,
Next:<a rel=next href="#Accounts">Accounts</a>,
Previous:<a rel=previous href="#Introduction">Introduction</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>XML and interoperability</h1>

<p>When publishing content or building a database for specific purposes (contact
database, task lists, account information, permissions etc.) it is of the
outermost importance to choose a data format that allows other programs
to re-use the database and your own program to import databases from other
programs.

<p>Using XML for that purpose is only half of the answer. XML will merely
prevent you to write a parser to read XML files and save you from the
pitfall of inventing yet another data format. It says nothing about the
semantic of the tags you decided to use. The harder part is to define
the semantic associated with an XML file. For instance,
<a href="http://www.docbook.org/">DocBook</a> uses XML but the core of the
work was to define what each tag means and make sure it covers all
possible needs. It tooks years and is not finished yet. Inventing a new
semantic for a given purpose is not something that should be undertaken
lightly.

<p>In some cases there already exists a semantic that fits your needs. Even
if it's not an established standard
(<a href="http://my.netscape.com/publish/formats/rss-spec-0.91.html">RSS</a>
is a widely spread de-facto standard) it will save you the effort to invent
something completly new. You may even be able to join the group that works
on this semantic to enhance it if needs be. There are some DTD repositories
that can help you find out if something exists:

<ul>

<li><a href="http://www.xml.com/pub/rg/DTDs">XML.com DTD</a>

<li><a href="http://www.rosettanet.org/rosettanet/Rooms/DisplayPages/LayoutInitial?Container=com.webridge.entity.Entity%5BOID%5B6EDB5FE87F69D411BD84009027E33DD8%5D%5D">RosettaNet</a>

<li><a href="http://www.hr-xml.org/schemas/dtd/">hr-xml.org</a>

<li><a href="http://www.schema.net/">Schema.net</a>

<li><a href="http://registry.xml.org:2020/repository/ui/searchResults.jsp?qall=dtd">XML.org</a>

<li><a href="http://www.openapplications.org/_vti_bin/shtml.exe/xml/loadform.htm">Open Applications Group</a>

<li><a href="http://www.lisa.org/tmx/tmx.htm">Translation Memory eXchange</a>

<li><a href="http://www.docuverse.com/xlf/index.html">Extensible Log Format</a>

</ul>

<p>When the data format is chosen, chosing or writing the programs that provide
a given service is driven by this choice. If an application exists that does
not support the format chosen, it's fairly reasonable to write a small program
that translate the data format into the application specific data and vice
versa. The advantages of doing this are:

<ul>

<li>If a new, better program becomes available and you can switch to it using
the chosen data format do dump/reload the data.

<li>If you contribute the export/import program to the developers of the
program they are likely to accept it because it's based on a standard.

<li>If you want to display static HTML pages from the XML export, XSLT
allows to do this in a fairly simple way.

</ul>

<p><hr>
Node:<a name="Accounts">Accounts</a>,
Next:<a rel=next href="#Web">Web</a>,
Previous:<a rel=previous href="#XML%20and%20interoperability">XML and interoperability</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>Accounts</h1>

<ul>
<li><a href="#System%20Passwords">System Passwords</a>: 
<li><a href="#Account%20Create">Account Create</a>: 
<li><a href="#Account%20Access">Account Access</a>: 
<li><a href="#Account%20Update">Account Update</a>: 
<li><a href="#Account%20Delete">Account Delete</a>: 
<li><a href="#Cron%20Job">Cron Job</a>: 
</ul>

<p><hr>
Node:<a name="System%20Passwords">System Passwords</a>,
Next:<a rel=next href="#Account%20Create">Account Create</a>,
Previous:<a rel=previous href="#Accounts">Accounts</a>,
Up:<a rel=up href="#Accounts">Accounts</a>
<br>

<h2>System Passwords</h2>

<p>If you need the password of system users such as root or www you
should ask to the following persons:

<ul>

<li><a href="mailto:rq@lolix.org">Rodolphe Quiedeville</a>

<li><a href="mailto:loic@gnu.org">Loic Dachary</a>

</ul>

<p><hr>
Node:<a name="Account%20Create">Account Create</a>,
Next:<a rel=next href="#Account%20Access">Account Access</a>,
Previous:<a rel=previous href="#System%20Passwords">System Passwords</a>,
Up:<a rel=up href="#Accounts">Accounts</a>
<br>

<h2>Account Create</h2>

<p>The user accounts on <code>france.fsfeurope.org</code> are managed with
<a href="http://savannah.gnu.org/">Savannah</a>. If someone need a shell
account on <code>france.fsfeurope.org</code> he has to get an account on
<a href="http://savannah.gnu.org/">Savannah</a> first. Then he should send
a mail to one of the project administrators of the
<a href="http://savannah.gnu.org/projects/fsffr/">fsffr</a> project. The
project administrator adds him as a member of the
<a href="http://savannah.gnu.org/projects/fsffr/">fsffr</a> project. Within
24 hours a cron job on <code>france.fsfeurope.org</code> will fetch the
new user from Savannah and create the account.

<p><hr>
Node:<a name="Account%20Access">Account Access</a>,
Next:<a rel=next href="#Account%20Update">Account Update</a>,
Previous:<a rel=previous href="#Account%20Create">Account Create</a>,
Up:<a rel=up href="#Accounts">Accounts</a>
<br>

<h2>Account Access</h2>

<p>Once the account is created, access to the machine is available using
ssh and a public key. The Savannah password will not work on
<code>france.fsfeurope.org</code>. When logged on
<a href="http://savannah.gnu.org/projects/fsffr/">fsffr</a> it is possible
to register one or more public key at
<a href="http://savannah.gnu.org/account/editsshkeys.php">Edit SSH Keys</a>.

<p><hr>
Node:<a name="Account%20Update">Account Update</a>,
Next:<a rel=next href="#Account%20Delete">Account Delete</a>,
Previous:<a rel=previous href="#Account%20Access">Account Access</a>,
Up:<a rel=up href="#Accounts">Accounts</a>
<br>

<h2>Account Update</h2>

<p>Once a day the ssh public keys of every account on
<code>france.fsfeurope.org</code> are updated from the information fetched on
Savannah. If the <code>authorized_keys</code> file of a user is manualy updated,
it will be overwritten.

<p><hr>
Node:<a name="Account%20Delete">Account Delete</a>,
Next:<a rel=next href="#Cron%20Job">Cron Job</a>,
Previous:<a rel=previous href="#Account%20Update">Account Update</a>,
Up:<a rel=up href="#Accounts">Accounts</a>
<br>

<h2>Account Delete</h2>

<p>When a user is not listed anymore in the
<a href="http://savannah.gnu.org/projects/fsffr/">fsffr</a>, its account is
disabled on <code>france.fsfeurope.org</code>. The home directory is not
deleted and if the user is added again at a later time, he will retrieve
his former home directory.

<p><hr>
Node:<a name="Cron%20Job">Cron Job</a>,
Previous:<a rel=previous href="#Account%20Delete">Account Delete</a>,
Up:<a rel=up href="#Accounts">Accounts</a>
<br>

<h2>Cron Job</h2>

<p>The <code>/usr/local/bin/savannah_users</code> script does the update. It
is run from the <code>/etc/cron.d/savannah_users</code> cron file and spits
log information in <code>/var/log/savannah_users.log</code>. The log file
is rotated according to the <code>/etc/logrotate.d/savannah_users</code>
specification.

<p>Savannah does not serve account information anonymously. The
<code>france.fsfeurope.org</code> machine is explicitly allowed to retrieve
the relevant information in XML. For more information check the
<a href="http://savannah.gnu.org/savannah.html#Account%20Management">Account Management</a> chapter of the Savannah documentation.

<p><hr>
Node:<a name="Web">Web</a>,
Next:<a rel=next href="#Private%20Data">Private Data</a>,
Previous:<a rel=previous href="#Accounts">Accounts</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>Web</h1>

<ul>
<li><a href="#Overview">Overview</a>: 
<li><a href="#Virtual%20Hosts">Virtual Hosts</a>: 
<li><a href="#Editing%20the%20Web">Editing the Web</a>: 
<li><a href="#Separate%20layout%20and%20content">Separate layout and content</a>: 
<li><a href="#Update%20from%20CVS">Update from CVS</a>: 
<li><a href="#Nightly%20script">Nightly script</a>: 
<li><a href="#Immediate%20Update">Immediate Update</a>: 
</ul>

<p><hr>
Node:<a name="Overview">Overview</a>,
Next:<a rel=next href="#Virtual%20Hosts">Virtual Hosts</a>,
Previous:<a rel=previous href="#Web">Web</a>,
Up:<a rel=up href="#Web">Web</a>
<br>

<h2>Overview</h2>

<p>The FSF Europe web sites are stored in CVS on the GNU machines. They
can be edited from there and the france.fsfeurope.org has a local copy
of all the pages that are updated every hour. The primary purpose of
the france.fsfeurope.org machine is to host the FSF France web site,
data and programs. However every web site related to the GNU project
and friends of the GNU project are invited to use the machine for web
hosting if they need it.

<p><hr>
Node:<a name="Virtual%20Hosts">Virtual Hosts</a>,
Next:<a rel=next href="#Editing%20the%20Web">Editing the Web</a>,
Previous:<a rel=previous href="#Overview">Overview</a>,
Up:<a rel=up href="#Web">Web</a>
<br>

<h2>Virtual Hosts</h2>

<p>The <code>/etc/apache/httpd.conf</code> was configured with virtual hosts. It
handles the following domain names:

<dl>
<dt><code>france.fsfeurope.org</code>
<dd>with a document root at <code>/var/www/france.fsfeurope.org</code>
that points to <code>/home/www/fsfe/fr</code>.

<br><dt><code>www.france.fsfeurope.org, fr.fsf.org, www.fr.fsf.org</code>
<dd>with a redirect to france.fsfeurope.org

</dl>

<p>All new domains should use a similar policy, that will help keeping
things simple.

<p><hr>
Node:<a name="Editing%20the%20Web">Editing the Web</a>,
Next:<a rel=next href="#Separate%20layout%20and%20content">Separate layout and content</a>,
Previous:<a rel=previous href="#Virtual%20Hosts">Virtual Hosts</a>,
Up:<a rel=up href="#Web">Web</a>
<br>

<h2>Editing the Web</h2>

<p>All users registered in the
<a href="http://savannah.gnu.org/projects/fsfe/">FSF Europe</a> project can
edit the HTML repository using CVS/SSH. Instructions on how to do so can
be found on <a href="http://savannah.gnu.org/cvs/?group_id=53">Savannah</a>. 
The modified files will be updated on france.fsfeurope.org within one
hour. They will be available immediately after a commit on
http://www.gnu.org/fsfe/ which is convenient for testing.

<p>The pages are stored in <code>.xhtml</code> files and formated automaticaly
to <code>.html</code> files. <a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a> will tell you
how to deal with this within seconds.

<p><hr>
Node:<a name="Separate%20layout%20and%20content">Separate layout and content</a>,
Next:<a rel=next href="#Update%20from%20CVS">Update from CVS</a>,
Previous:<a rel=previous href="#Editing%20the%20Web">Editing the Web</a>,
Up:<a rel=up href="#Web">Web</a>
<br>

<h2>Separate layout and content</h2>

<p>It is convenient to separate the layout of an HTML page from the actual
content. It prevents duplicating the menus in each page and allows to
have a nice display without the burden of fixing it in every page when
something needs fixing. Using SSI (Server Side Includes) is a solution
to this problem but it has the disadvantage that it requires from
web server displaying the pages to have this feature enabled, which is
not always the case.

<p>We chose to use an <a href="http://www.w3c.org/TR/xslt">XSLT</a>
processor to separate the content from the layout. An XSLT processor
provides something similar to a C preprocessor but is applied to XML
files. The content of the pages are written in
<a href="http://www.w3.org/TR/xhtml1">HTML</a>, which is a slightly
different form of HTML that makes it XML compliant. The layout of the
pages is stored in XSL files and the XSLT processor merges the two to
produce an HTML page that will be used for display.

<pre>
XSL file    ----\
                 =&gt; XSLT processor ----&gt; HTML file
XHTML file  ----/

</pre>

<p>We chose to use XSL rather than any other method because it is
a widely accepted standard and that Free Software tools are available
everywhere that implement it. There are many possible uses of XSL but
this chapter only focuses on using it to separate the layout of a
web site from it's content.

<ul>
<li><a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>: 
<li><a href="#XSLT%20processors">XSLT processors</a>: 
<li><a href="#Writing%20XHTML%20content">Writing XHTML content</a>: 
<li><a href="#XSL%20and%20generated%20HTML">XSL and generated HTML</a>: 
<li><a href="#Writing%20XSL%20files">Writing XSL files</a>: 
</ul>

<p><hr>
Node:<a name="XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>,
Next:<a rel=next href="#XSLT%20processors">XSLT processors</a>,
Previous:<a rel=previous href="#Separate%20layout%20and%20content">Separate layout and content</a>,
Up:<a rel=up href="#Separate%20layout%20and%20content">Separate layout and content</a>
<br>

<h3>XHTML and XSLT Quick Start</h3>

<p>Assuming you're facing a directory that contains a mixture of
<code>.xhtml</code>, <code>.html</code> and/or <code>.xsl</code> files and you just
want to contribute content without actually understanding what all
this about, here is what you should do:

<ul>

<li>Modify the <code>.xhtml</code> file, not the generated <code>.html</code> file.

<li>If you want to create a new file, create it with the <code>.xhtml</code>
extension. Copy a <code>boilerplate.xhtml</code> from <a href="http://france.fsfeurope.org/boilerplate.xhtml">somewhere</a> or copy and modify a <code>.xhtml</code> file
in the same directory.

<li>To see the resulting HTML file, look for a Makefile in the directory
or the upper directories that recursively walk the tree to format XHTML
files into HTML files. If a grep <code>sabcmd</code> or <code>xsltproc</code> on a
Makefile finds something, you probabl found the good one. Run <code>make
all</code> and look at the generated HTML file with your web browser.

<li>To add a menu entry, edit the XSL file that ends with the <code>.xsl</code>
extension. It should contain the menu entries: that's why they are
created in the first place. Although the syntax of this file may not be
familiar, the menu entries themselves are written in plain XHTML.

<li>To re-use existing XSL files for your own web pages do the following

<pre>
#
# Make sure you have the sablotron XSLT processor
#
apt-get install sablotron
#
# Get the XSL files
#
wget http://france.fsfeurope.org/navigation.fr.xsl
wget http://france.fsfeurope.org/fsfe-fr.xsl
#
# Get the Makefile
#
wget http://france.fsfeurope.org/Makefile
#
# Get the boilerplate
#
wget http://france.fsfeurope.org/boilerplate.fr.xhtml
#
# edit fsfe-fr.xsl and remove all references to navigation.*.xsl other
# than navigation.en.xsl.
#
# Build the boilerplate.fr.html file
#
make all
#
# View boilerplate.fr.html with a web browser and start customizing
#
</pre>

</ul>

<p><hr>
Node:<a name="XSLT%20processors">XSLT processors</a>,
Next:<a rel=next href="#Writing%20XHTML%20content">Writing XHTML content</a>,
Previous:<a rel=previous href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>,
Up:<a rel=up href="#Separate%20layout%20and%20content">Separate layout and content</a>
<br>

<h3>XSLT processors</h3>

<p>There are many XSLT processors. We recommend the following two:

<ul>

<li><a href="http://www.gingerall.com/charlie-bin/get/webGA/act/download.act">sablotron</a>

<li><a href="http://www.xmlsoft.org/">libxslt</a>

</ul>

<p><hr>
Node:<a name="Writing%20XHTML%20content">Writing XHTML content</a>,
Next:<a rel=next href="#XSL%20and%20generated%20HTML">XSL and generated HTML</a>,
Previous:<a rel=previous href="#XSLT%20processors">XSLT processors</a>,
Up:<a rel=up href="#Separate%20layout%20and%20content">Separate layout and content</a>
<br>

<h3>Writing XHTML content</h3>

<p>The content of the web site is written in XHTML files that have
the <code>.xhtml</code> extension. The XHTML looks like a regular HTML
file, you don't have to learn anything new. Taking an existing HTML
file and converting it to XHTML is simple. You only have to take
care of the following:

<ul>

<li>Add the following at the beginning of the file:

<pre>&lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;
&lt;!DOCTYPE html
          PUBLIC "-//W3C//DTD HTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
</pre>

<p>This declaration says that your file is in XHTML and that it contains
<code>iso-8859-1</code> characters.

</p><li>Always close opening tags or the XSLT processor will bark. If
you want to use a single tag, end it with a /&gt;.

<pre>&lt;br /&gt;
&lt;ul&gt;
&lt;li&gt; Item 1 &lt;/li&gt;
&lt;li&gt; Item 2 &lt;/li&gt;
&lt;/ul&gt;
</pre>

<li>Wrap the content of the page using the proper tags.

<pre>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;My Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
     My stuff
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<p>Web browsers may very well cope with the fact that you forget those but
XSLT processors will not.

</p><li>Unlike html, tags and attribute names are case-sensitive and they are
    defined in <code>lower-case</code>.

<pre>&lt;title&gt; My Title &lt;/title&gt;
</pre>

<li>Attribute values must be always inside quotes.

<pre>&lt;a href="URL"&gt;What is it&lt;/a&gt;
</pre>

</ul>

<p><hr>
Node:<a name="XSL%20and%20generated%20HTML">XSL and generated HTML</a>,
Next:<a rel=next href="#Writing%20XSL%20files">Writing XSL files</a>,
Previous:<a rel=previous href="#Writing%20XHTML%20content">Writing XHTML content</a>,
Up:<a rel=up href="#Separate%20layout%20and%20content">Separate layout and content</a>
<br>

<h3>XSL and generated HTML</h3>

<p>XSL is not able to deal with HTML that does not look like XML (XHTML). 
Unfortunately most programs that generate HTML such as <code>makeinfo</code> or
<code>hevea</code> do not generate XHTML but plain HTML. In this case including
the generated HTML cannot be done with XSL. We suggest the following
method:

<ul>

<li>Add a SSI line to include the generated HTML file.

<pre>&lt;!--#include virtual="sysadmin-france.en.html"--&gt;
</pre>

<li>After running the XSLT processor, replace the SSI line with the
content of the generated HTML file.

<pre>perl -MFile::Copy -pi -e \
      '$| = 1; copy("$1", \*STDOUT) if(/\#include virtual=\"(.*?)\"/);' \
      result.html
</pre>

</ul>

<p><hr>
Node:<a name="Writing%20XSL%20files">Writing XSL files</a>,
Previous:<a rel=previous href="#XSL%20and%20generated%20HTML">XSL and generated HTML</a>,
Up:<a rel=up href="#Separate%20layout%20and%20content">Separate layout and content</a>
<br>

<h3>Writing XSL files</h3>

<p>If you're only interested in modifying the menus that are located
in XSL files (those with the <code>.xsl</code> extension), you can consider
that XSL files are just XHTML files and forget about the rest.

<p>To create your own XSL file without learning XSL, copy the XSL files
of the <a href="http://france.fsfeurope.org/">FSF France</a> web site
and change them to your liking. The
<a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a> chapter will give you instructions
to do this.

<p>It takes a few days to get accustomed to
<a href="http://www.w3.org/TR/xslt">XSLT</a>. If you're familiar with <a href="http://www.gnu.org/software/m4/">m4</a> you'll find that
easy. Otherwise it will look very strange because it looks like a
programing language but is really a data transformation language.

<p>A common pitfall when dealing with XSL is to try to use its most
advanced features and this may lead to XSL files that are complex and
very hard to understand and debug. Since XSL has almost all the features
of a programming language (loops, variables, conditions, functions,
etc.) but none of it's facilities (debugger, profiler etc.), complex
XSL files will make your life a living hell. It may worth the effort
(for <a href="http://sourceforge.net/projects/docbook/">DocBook</a>
transofrmation to HTML for instance) you have to carefully evaluate
the pro and cons in advance.

<p>A good XSL file is a file that even someone not accustomed to XSL could
figure out, even if he won't be able to modify it's structure. Check the
<a href="http://france.fsfeurope.org/navigation.en.xsl">english menus</a> of
the <a href="http://france.fsfeurope.org/server/server.en.html">FSF France</a>
web site for an example.

<p><hr>
Node:<a name="Update%20from%20CVS">Update from CVS</a>,
Next:<a rel=next href="#Nightly%20script">Nightly script</a>,
Previous:<a rel=previous href="#Separate%20layout%20and%20content">Separate layout and content</a>,
Up:<a rel=up href="#Web">Web</a>
<br>

<h2>Update from CVS</h2>

<p>A <code>cvs update</code> is done every hour in the
<code>/home/www/fsfe</code> directory by the
<code>/etc/cron.d/www</code> user crontab.  The logs of the update are stored
in <code>/var/log/www.log</code> and rotated by
<code>/etc/logrotate.d/www</code>.

<p>Note that this update does not generate the HTML pages from the XHTML
pages. The <a href="#Nightly%20script">Nightly script</a> takes care of this.

<p><hr>
Node:<a name="Nightly%20script">Nightly script</a>,
Next:<a rel=next href="#Immediate%20Update">Immediate Update</a>,
Previous:<a rel=previous href="#Update%20from%20CVS">Update from CVS</a>,
Up:<a rel=up href="#Web">Web</a>
<br>

<h2>Nightly script</h2>

<p>The <code>/home/www/bin/nightly</code> script is run daily by the <code>www</code>
user and is in charge of the following:

<ul>

<li>Run <code>cvs update</code> in the <code>/home/www/fsfe</code> directory.

<li>Update the symbolic links according to the content of the
<code>.symlinks</code> files. See the <a href="http://www.gnu.org/server/standards/README.html#SEC01">Symbolic Links</a> chapter of the webmaster guidelines for
detailed information.

<li>Run the <code>all</code> goal of all the Makefiles
found in the <code>/home/www/fsfe/</code> directory. 
Those Makefiles are in charge of formating
the XHTML into HTML, formating <code>.texi</code> or <code>.tex</code> files into
HTML among other things.

</ul>

<p>The logs of the nightly script are stored in <code>/var/log/nightly.log</code>
and rotated by <code>/etc/logrotate.d/nightly</code>.

<p>The <code>nightly</code> script can be run by hand after login as the <code>www</code>
user.

<p><hr>
Node:<a name="Immediate%20Update">Immediate Update</a>,
Previous:<a rel=previous href="#Nightly%20script">Nightly script</a>,
Up:<a rel=up href="#Web">Web</a>
<br>

<h2>Immediate Update</h2>

<p>If you ever want to update the web in no time you have to do the following:

<pre>ssh -l www france.fsfeurope.org
cd fsfe
cvs update
../bin/nightly
</pre>

<p><hr>
Node:<a name="Private%20Data">Private Data</a>,
Next:<a rel=next href="#System">System</a>,
Previous:<a rel=previous href="#Web">Web</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>Private Data</h1>

<p>Most if not all the private data of the FSF France is handled by the
<a href="http://savannah.gnu.org/projects/fsfeprivate">FSF Europe Private Data</a> project on Savannah. Its access is restricted to its members only,
there is no anonymous access. If you need to have access to this
repository write to <a href="mailto:team@fsfeurope.org">FSF Europe Team</a> or
<a href="mailto:france@fsfeurope.org">france@fsfeurope.org</a>FSF France.

<p><hr>
Node:<a name="System">System</a>,
Next:<a rel=next href="#Concept%20Index">Concept Index</a>,
Previous:<a rel=previous href="#Private%20Data">Private Data</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>System</h1>

<ul>
<li><a href="#Security">Security</a>: 
<li><a href="#DNS">DNS</a>: 
<li><a href="#Statistics">Statistics</a>: 
</ul>

<p><hr>
Node:<a name="Security">Security</a>,
Next:<a rel=next href="#DNS">DNS</a>,
Previous:<a rel=previous href="#System">System</a>,
Up:<a rel=up href="#System">System</a>
<br>

<h2>Security</h2>

<ul>
<li><a href="#Firewall">Firewall</a>: 
</ul>

<p><hr>
Node:<a name="Firewall">Firewall</a>,
Previous:<a rel=previous href="#Security">Security</a>,
Up:<a rel=up href="#Security">Security</a>
<br>

<h3>Firewall</h3>

<p>A shell script applies filtering rules, it's located in
<code>/etc/init.d/firewall</code>. This script is compatible with kernel 2.2
and 2.4 and detects the kernel version using <code>uname</code>. <code>ipchains</code> is
used with 2.2 and <code>iptables</code> with 2.4.

<p>Warning : only the ipchains (2.2) section is well configured.

<p>The policy applied is to close all TCP/UDP port by default and open only
the ones we need.

<p><hr>
Node:<a name="DNS">DNS</a>,
Next:<a rel=next href="#Statistics">Statistics</a>,
Previous:<a rel=previous href="#Security">Security</a>,
Up:<a rel=up href="#System">System</a>
<br>

<h2>DNS</h2>

<p>The DNS is handled by the GNU name servers. 
The FSF France machine can be reached through the following names : <code>fr.fsfeurope.org</code>, <code>france.fsfeurope.org</code> or <code>fsffrance.org</code>.

<p>The latter domain name (<code>fsffrance.org</code>) has been bought at <a href="http://www.gandi.net">GANDI</a>, a French registrar, and is owned by <a href="mailto:raph@r4f.org">Raphael Rousseau</a> who's the Administrative, Technical and Billing contact of this domain name.

<p>The primary and secondary name servers are respectively  <code>ns1.gnu.org</code> (<code>199.232.76.162</code>) and <code>sfi.santafe.edu</code> (<code>192.12.12.1</code>).

<p><hr>
Node:<a name="Statistics">Statistics</a>,
Previous:<a rel=previous href="#DNS">DNS</a>,
Up:<a rel=up href="#System">System</a>
<br>

<h2>Statistics</h2>

<p>Systems statistics are generated with mrtg
<a href="http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/">http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/</a>

<ul>
<li><a href="#Installation">Installation</a>: 
<li><a href="#Output">Output</a>: 
</ul>

<p><hr>
Node:<a name="Installation">Installation</a>,
Next:<a rel=next href="#Output">Output</a>,
Previous:<a rel=previous href="#Statistics">Statistics</a>,
Up:<a rel=up href="#Statistics">Statistics</a>
<br>

<h3>Installation</h3>

<p>mrtg and addons have been installed with apt-get, two packages :

<ul>
<li>mrtg version 2.8.9-1
<li>mrtgutils version 0.2
</ul>

<p>Some more scripts are used, they are located in <code>/usr/local/bin</code>,
they are coming from <a href="http://mrtg.xidus.net/">http://mrtg.xidus.net/</a>

<ul>
<li>swapstat.sh
<li>stat.pl
</ul>

<p><hr>
Node:<a name="Output">Output</a>,
Previous:<a rel=previous href="#Installation">Installation</a>,
Up:<a rel=up href="#Statistics">Statistics</a>
<br>

<h3>Output</h3>

<p>Output dir is <code>/var/www/france.fsfeurope.org/mrtg/</code>

<p><hr>
Node:<a name="Concept%20Index">Concept Index</a>,
Next:<a rel=next href="#Name%20Index">Name Index</a>,
Previous:<a rel=previous href="#System">System</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>Index of Concepts</h1>

<ul compact>
<li>.xhtml files editing: <a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>
<li>DNS: <a href="#Firewall">Firewall</a>
<li>edit .xhtml files: <a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>
<li>edit france.fsfeurope.org: <a href="#Editing%20the%20Web">Editing the Web</a>
<li>firewall: <a href="#Security">Security</a>
<li>france.fsfeurope.org updates: <a href="#Update%20from%20CVS">Update from CVS</a>
<li>fsfe project: <a href="#Editing%20the%20Web">Editing the Web</a>
<li>fsffr and shell account: <a href="#Account%20Create">Account Create</a>
<li>fsffrance.org: <a href="#Firewall">Firewall</a>
<li>libxslt: <a href="#XSLT%20processors">XSLT processors</a>
<li>password ssh: <a href="#Account%20Access">Account Access</a>
<li>public key update: <a href="#Account%20Update">Account Update</a>
<li>re-use XSL example: <a href="#Writing%20XSL%20files">Writing XSL files</a>
<li>sabcmd: <a href="#XSLT%20processors">XSLT processors</a>
<li>sablotron: <a href="#XSLT%20processors">XSLT processors</a>
<li>security: <a href="#System">System</a>
<li>shell account: <a href="#Account%20Create">Account Create</a>
<li>shell account ssh: <a href="#Account%20Access">Account Access</a>
<li>ssh and password: <a href="#Account%20Access">Account Access</a>
<li>ssh public key: <a href="#Account%20Access">Account Access</a>
<li>ssh public key update: <a href="#Account%20Update">Account Update</a>
<li>ssh shell account: <a href="#Account%20Access">Account Access</a>
<li>SSI: <a href="#Separate%20layout%20and%20content">Separate layout and content</a>
<li>statistics mrtg: <a href="#DNS">DNS</a>
<li>www.fsfeurope.org updates: <a href="#Update%20from%20CVS">Update from CVS</a>
<li>www.gnu.org: <a href="#Update%20from%20CVS">Update from CVS</a>
<li>XHTML: <a href="#Separate%20layout%20and%20content">Separate layout and content</a>
<li>XHTML and XSLT quick start: <a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>
<li>XHTML rules: <a href="#Writing%20XHTML%20content">Writing XHTML content</a>
<li>XSL examples: <a href="#Writing%20XSL%20files">Writing XSL files</a>
<li>XSL files of your own: <a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>
<li>XSL learning curve: <a href="#Writing%20XSL%20files">Writing XSL files</a>
<li>XSL pitfall: <a href="#Writing%20XSL%20files">Writing XSL files</a>
<li>XSLT: <a href="#Separate%20layout%20and%20content">Separate layout and content</a>
<li>XSLT and XHTML quick start: <a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>
<li>xsltproc: <a href="#XSLT%20processors">XSLT processors</a>
<li>your own XSL files: <a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>
</ul>
<p><hr>
Node:<a name="Name%20Index">Name Index</a>,
Previous:<a rel=previous href="#Concept%20Index">Concept Index</a>,
Up:<a rel=up href="#Top">Top</a>
<br>

<h1>Index of File Names</h1>

<ul compact>
</ul>


<h1>Table of Contents</h1>
<ul>
<li><a href="#Top">Sysadmin France</a>
<li><a href="#Introduction">Introduction</a>
<li><a href="#XML%20and%20interoperability">XML and interoperability</a>
<li><a href="#Accounts">Accounts</a>
<ul>
<li><a href="#System%20Passwords">System Passwords</a>
<li><a href="#Account%20Create">Account Create</a>
<li><a href="#Account%20Access">Account Access</a>
<li><a href="#Account%20Update">Account Update</a>
<li><a href="#Account%20Delete">Account Delete</a>
<li><a href="#Cron%20Job">Cron Job</a>
</ul>
<li><a href="#Web">Web</a>
<ul>
<li><a href="#Overview">Overview</a>
<li><a href="#Virtual%20Hosts">Virtual Hosts</a>
<li><a href="#Editing%20the%20Web">Editing the Web</a>
<li><a href="#Separate%20layout%20and%20content">Separate layout and content</a>
<ul>
<li><a href="#XHTML%20and%20XSLT%20Quick%20Start">XHTML and XSLT Quick Start</a>
<li><a href="#XSLT%20processors">XSLT processors</a>
<li><a href="#Writing%20XHTML%20content">Writing XHTML content</a>
<li><a href="#XSL%20and%20generated%20HTML">XSL and generated HTML</a>
<li><a href="#Writing%20XSL%20files">Writing XSL files</a>
</ul>
<li><a href="#Update%20from%20CVS">Update from CVS</a>
<li><a href="#Nightly%20script">Nightly script</a>
<li><a href="#Immediate%20Update">Immediate Update</a>
</ul>
<li><a href="#Private%20Data">Private Data</a>
<li><a href="#System">System</a>
<ul>
<li><a href="#Security">Security</a>
<ul>
<li><a href="#Firewall">Firewall</a>
</ul>
<li><a href="#DNS">DNS</a>
<li><a href="#Statistics">Statistics</a>
<ul>
<li><a href="#Installation">Installation</a>
<li><a href="#Output">Output</a>
</ul>
</ul>
<li><a href="#Concept%20Index">Index of Concepts</a>
<li><a href="#Name%20Index">Index of File Names</a>
</ul>


