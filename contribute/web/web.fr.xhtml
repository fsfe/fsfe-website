<?xml version="1.0" encoding="utf-8" ?>
<html>
  <head>
    <title>FSFE - Information pour les webmestres</title>
  </head>
  <body>
    
    <p id="category"><a href="/contribute/">Contribuer</a></p>
    <h1>Webmestres</h1>

    <p id="introduction">
      L'<em>équipe Web</em> maintient et développe les sites de la FSFE&#160;—
      allant de <a href="/">fsfe.org</a> aux sites de projet ou de campagne. Les webmestres sont des volontaires qui améliore le visage que l'organisation donne au monde et apportent des solutions techniques à nos efforts sur le Web.    </p>
    
    <h2>Introduction</h2>
    
    <p>
      Les technologies employées pour la maintenance des pages web de la FSFE
      apparaîtront sans doute familières à beaucoup de développeurs ou auteurs,
      et leur description intéressera plus particulièrement ceux qui ne les
      connaissent pas encore bien.
    </p>

<p>
Les traducteurs et bénévoles occasionnels ne seront probablement en relation qu'avec les parties suivantes&#160;:
</p>

<ul>
<li>
        <a href="http://en.wikipedia.org/wiki/XHTML">XHTML</a> – pour générer les pages&#160;;
      </li>
      <li>
        <a href="http://subversion.tigris.org/" target="_blank">Subversion</a> –
        pour le versionnage des fichiers source&#160;;
      </li>
      <li>
      <a href="http://trac.edgewall.org/" target="_blank">Trac</a> – pour la gestion des droits d'accès, le suivi des dysfonctionnements et d'autres services liés au suivi du projet.
      </li>
</ul>

<p>
Les volontaires qui souhaitent s'engager plus sérieusement dans la maintenance du site devraient également se familiariser avec&#160;:
</p>

<ul>
<li>
<a href="http://www.perl.org" target="_blank">Perl</a> – pour la maintenance et les scripts de création des pages&#160;;
</li>
<li>
<a href="http://www.apache.org" target="_blank">Apache</a> – le serveur web.
</li>
</ul>


    <h2>Comprendre le mécanisme de construction des pages web</h2>

    <p>
    Les pages web de <var>fsfe.org</var> sont maintenues comme un ensemble de fichiers XML. Le serveur web génère automatiquement les pages HTML à partir de ces fichiers XML, toutes les cinq minutes. Ainsi, toute l'édition des pages se fait dans les fichiers XML, et on ne travaille jamais directement sur les fichiers HTML.
    </p>

    <p>
    Chaque page sur fsfe.org est nommée 
      <var><em>nomdelapage</em>.<em>langue</em>.html</var> (<em>langue</em> étant le code à deux lettres iso-639 de la langue, comme "en" pour l'anglais ou "fr" pour le français). Les fichiers source sont nommés
      <var><em>nomdelapage</em>.<em>langue</em>.xhtml</var>.
      </p>
      
      <p>
      Certaines pages ont un contenu dynamique&#160;: hormis les textes fixes tirés du fichier XHTML, elles contiennent des informations provenant d'un ou plusieurs fichiers XML. Lorsqu'une telle page est construite, le système prend les fichiers XML traduits s'ils sont disponibles, et prend la version anglaise de ces fichiers sinon. De telles pages peuvent donc afficher certaines parties traduites alors que d'autres seront encore en anglais. La 
      <a href="/index.html">page d'accueil</a>, la
      <a href="/news/news.html">page des nouvelles</a>, et la 
      <a href="/events/events.html">page des évènements</a> par exemple, sont construites ainsi.
    </p>

    <h2>Accéder aux pages Web</h2>

    <p>
      Les fichiers sources sont stoqués sur le <a href="https://svn.fsfe.org/fsfe-web">dépôt subversion fsfe-web</a>, lui-même hébergé sur le serveur subversion de la FSFE. D'autres services sont disponibles sur l'instance <a href="https://trac.fsfe.org/fsfe-web">Trac</a>.
    </p>
    <p>
      Pour avoir accès à ces outils, suivez les instructions suivantes&#160;:
    </p>
    <ul>
      <li>
        <p>
	If you are a <a href="http://fellowship.fsfe.org">Fellow of the FSFE</a>
	Si vous êtes un <a href="http://fellowship.fsfe.org">Fellow de la FSFE</a>, vous avez déjà accès en lecture à subversion et au trac. Il vous suffit de vous connecter avec vos noms d'utilisateurs et mot de passe habituels.
        </p>
	<p>
	Pour obtenir un accès en écriture au dépôt subversion, au wiki du Trac et au système de tickets, envoyez votre demande à <b>system-hackers@fsfeurope.org</b>
        </p>
      </li>
      <li>
      <p>
      Sinon, vous pouvez créer un compte invité pour subversion et trac en remplissant le formulaire suivant&#160;: <a     href="https://trac.fsfe.org/fsfe-web/register">https://trac.fsfe.org/fsfe-web/register</a>. Dès que vous vous serez enregistré, vous aurez accès en lecture au dépôt et au trac (notez que votre nom d'utilisateur sera préfixé par <var>guest-</var>). Un message automatique sera envoyé à l'administrateur qui donnera les droits d'écriture dès que possible.
        </p>
      </li>
    </ul>

    <h3>Rapatrier une version de travail depuis Subversion</h3>
    
    <p>
      Le dépôt subversion est constitué de deux éléments majeurs pour le site de la FSFE&#160;: le <a href="https://trac.fsfe.org/fsfe-web/browser/trunk">SVN trunk</a> (tronc SVN) qui est utilisé pour construire les pages du site public (<a href="http://fsfe.org">http://fsfe.org</a>) et la <a href="https://trac.fsfe.org/fsfe-web/browser/branches/test">branche «test»</a> qui est utilisée pour générer le site de test (<a href="http://test.fsfe.org">http://test.fsfe.org</a>).
    </p>
    <p>
      Pour le travail habituel, comme ajouter des nouvelles, traduire des pages ou introduire de petites corrections, vous devrez récupérer le tronc&#160;:
    </p>
    <p class="terminal">svn --username VOTRENOM co https://svn.fsfe.org/fsfe-web/trunk</p>
    <p>
      Pour travailler sur des changements plus profond, comme déboguer des nouvelles fonctionnalités qui pourraient fracasser le site, vous êtes invité à utiliser la branche de test du dépôt SVN&#160;:
    </p>
    <p class="terminal">svn --username VOTRENOM co https://svn.fsfe.org/fsfe-web/branches/test</p>
    <p>
      À noter qu'une version complète du dépôt requiert environ 160 Mio. Aussi, si vous pensez travailler uniquement sur certaines parties, vous pouvez rapatrier uniquement celle-ci. Vous pouvez <a href="https://trac.fsfe.org/fsfe-web/browser">parcourir la branche SVN</a> pour avoir une idée de l'agencement des fichiers.
    </p>


    <h2>Travailler avec le dépôt</h2>

    <p>
    Après avoir récupéré le dépôt une première fois, vous n'aurez qu'à exécuter chaque fois
    </p>
    
    <p class="terminal">$ svn update</p>
    
    <p>
      juste avant de vous mettre à travailler sur un fichier donné.
    </p>
    
    <p>
    Lorsque vous souhaitez ajouter de nouveaux fichiers au dépôt, exécutez
    </p>
    
    <p class="terminal">$ svn add <em>nomdufichier</em></p>
    
    <p>
    Pour envoyer vos changements au serveur, qu'il s'agisse d'un nouveau fichier ou de la modification d'un fichier existant, exécutez
    </p>
    
    <p class="terminal">$ svn commit <em>nomdufichier</em></p>
    
    <p>
      et un éditeur s'ouvrira, vous permettant d'indiquer une courte description des changements apportés.
      </p>

      <p>Avec subversion, la <a href="http://svnbook.red-bean.com/en/1.5/svn.advanced.props.special.keywords.html">substitution de >substitution de mots-clés (en anglais)</a> doit être explicitement définie pour chaque fichier. Comme nous utilisons quelques mots-clés dans les fichiers <var>.xml</var> et <var>.xhtml</var> (par exemple, le mot-clé <var>$</var><var>Author</var><var>$</var> en pied de page), vous pouvez le définir une fois pour toute en ajoutant la section suivante à votre fichier de configuration de SVN <var>~/.subversion/config</var>.</p>
      
      <pre class="file">
      enable-auto-props = yes

      [auto-props]
      *.xml = svn:keywords=Date Author Id Revision;svn:mime-type=text/xml;svn:eol-style=native
      *.xhtml = svn:keywords=Date Author Id Revision;svn:mime-type=text/xhtml;svn:eol-style=native
      </pre>

    <p>
      Si vous êtes habitué à travailler avec CVS, vous vous adapterez facilement à SVN. Comme vous l'avez constaté, les commandes de base sont très ressemblantes. Pour en savoir plus, vous pouvez consulter un aperçu des différences entre CVS et SVN sur <a href="http://svnbook.red-bean.com/en/1.5/svn.forcvs.html">Subversion for
      CVS Users</a> ainsi qu'un aperçu des différences entre commandes sur <a href="http://svn.collab.net/repos/svn/trunk/doc/user/cvs-crossover-guide.html">CVS to SVN Crossover Guide</a>.
    </p>


    <p>
    Vous pouvez télécharger un manuel détaillé de SVN, le <a href="http://svnbook.red-bean.com/">Subversion book</a> (nous utilisons la version 1.5 de SVN).
    </p>


 <h2>Outils de coordination</h2>

 <p>
   Les travaux sur les pages du site sont coordonnés sur la <a
      href="http://mail.fsfeurope.org/mailman/listinfo/web">liste de diffusion des webmestres (en anglais)</a>.
    </p>

    <p>
      L'instance Trac <a href="https://trac.fsfe.org/fsfe-web">fsfe-web</a> fournit d'autres outils liés à la coordination comme un navigateur de dépôt SVN en ligne, un traqueur de bogues et un wiki.
    </p>

    <p>
      Vous pourrez trouver plus d'informations sur l'utilisation du trac sur la page <a
      href="https://trac.fsfe.org/fsfe-web/wiki/TracGuide">TracGuide</a> du wiki.
    </p>


    <p>
    Si vous souhaitez conserver une trace de toutes les modifications apportées aux sources des pages web, souscrivez à la
      <a href="http://mail.fsfeurope.org/mailman/listinfo/web-cvs-notify">liste de diffusion des notifications</a>, vous recevrez ainsi un mail à chaque changement posté à l'arbre du source.
    </p>


    <h2>Les responsabilités incombant à l'accès en écriture</h2>

    <p>
    Si vous avez un accès en écriture aux pages web, inscrivez-vous à la 
      <a href="http://mail.fsfeurope.org/mailman/listinfo/web">liste de diffusion des webmestres</a>.
    </p>

    <p>
    Gardez à l'esprit que toutes vos modifications seront effectives et visibles automatiquement, sans autre action de la part de quiconque. En conséquence, il y a un certain nombre de choses que nous vous demandons de faire lorsque vous postez des changements ou des nouveaux fichiers&#160;:
    </p>

    <ul>
      <li>
        <p>
        La FSFE est responsable du contenu des pages web. S'il vous plaît, ne postez pas de modifications qui changent le sens du texte sans l'approbation préalable d'un
          <a href="/about/members.html">membre de l'équipe de la FSFE</a>.
          (Ceci n'est pas nécessaire lors de la traduction d'un contenu existant)
        </p>
      </li>

      <li>
        <p>
        Lorsque vous postez des traductions, et qu'il y a une chance que d'autres puissent la relire, utilisez cette opportunité. Vous pouvez utiliser la
          <a href="http://mail.fsfeurope.org/mailman/listinfo/translators">liste de diffusion des traducteurs</a> pour demander une relecture. Que vous traduisiez des pages ou les relisiez, nous vous encourageons à vérifier l'orthographe de vos fichiers à l'aide d'outils automatisés, comme GNU aspell, ispell ou encore votre correcteur orthographique préféré. Pour utiliser 
          <a href="http://aspell.net/">GNU aspell</a> par exemple sur un système Debian GNU/Linux, il vous suffit d'installer les paquetages <em>aspell</em> et
          <em>aspell-<strong>XX</strong></em> (où "XX" est votre code de langue), et de lancer ensuite la commande
          </p>
          
          <p class="terminal">aspell -H -d <em>langue</em> -c file.xhtml</p>
          
          <p>
          (où "langue" est le nom du dictionnaire pour votre langue&#160;;
          l'option <var>-d</var> peut être omise si votre locale UNIX est la même que celle du dictionnaire à utiliser).
        </p>
      </li>

      <li>
        <p>
        Assurez-vous que tous les fichiers sont des XML bien formés. Par défault, le serveur SVN va vérifier la syntaxe XML des fichiers aux extensions .xml et .xhtml et refusera les changements si des erreurs XML sont trouvées. Pour éviter cela, vérifiez vos fichiers avant de les envoyer, avec l'une des solutions suivantes&#160;:
        </p>

        <p>
          Le script <var>/trunk/tools/validate.pl</var> vous aide à trouver les
          erreurs dans les balises. Du code XML mal écrit enraye le processus de
          construction automatique des pages Web et bloque les mises à jour
          ultérieures du site Web. Si vous suspectez le processus d'être bloqué,
          vous pouvez <a
          href="http://status.fsfe.org/">vérifier la construction en cours</a>.
        </p>
        
        <p>
          Le script <var>validate.pl</var> requiert le module Perl
          <em>XML::LibXML</em>; si celui-ci n'est pas installé sur votre
          système, vous pouvez valider les fichiers avec votre validateur XML
          favori. Par exemple en ligne de commande vous pouvez utiliser
          <em>xmllint</em>, du projet <a
            href="http://xmlsoft.org/"><em>libxml2</em></a>.
        </p>
          
          <p>
          Si vous utilisez une distribution Debian GNU/Linux, installez le paquetage <em>libxml2-utils</em>&#160;; lancez la commande
          </p>
          
          <p class="terminal">xmllint --noout <em>fichier</em>.xhtml</p>
          
          <p>
          où <em>fichier</em> représente le nom du fichier que vous souhaitez vérifier, et lisez les éventuels messages d'erreur.
        </p>
      </li>
      
      <li>
        <p>
        Assurez-vous que l'encodage du fichier soit consistant avec le contenu de l'attribut "encoding" déclaré sur la première ligne du fichier. Par exemple, si votre fichier est codé en «iso-8859-1» (également connu sous le nom de «latin-1»), la première ligne du fichier devrait être
        </p>
        
        <p class="file">&lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;</p>
        
        <p>
          Un autre encodage valide est l'unicode, ou "utf-8". Si vous souhaitez modifier l'encodage d'un fichier, vous pouvez utiliser l'utilitaire standard <em>iconv</em>, comme dans l'exemple suivant (qui convertit un fichier de l'encodage "latin1" vers l'"utf-8")&#160;;
          </p>
          
          <p class="terminal">iconv -f LATIN1 -t UTF8 <em>fichieroriginal</em> &gt; <em>fichierdesortie</em></p>
          
          </li>
    </ul>

    <p>
    Coordonnez-vous avec les autres personnes qui ont également un accès CVS afin de vous assurer que les traductions et modifications apportées par les contributeurs qui n'ont pas d'accès en écriture sont expédiées correctement après avoir été relues. Bien sûr, vérifiez ces fichiers avant de les envoyer comme vous vérifiez vos propres fichiers.
    </p>


<h2>Informations complémentaires</h2>

 <p>Étant donné que les pages web de la FSFE ont un niveau européen/global et des niveaux locaux choisis par l'utilisateur, qui le complètent en apportant les informations spécifiques à chaque pays, la structure possède une certaine complexité qui est totalement cachée à l'utilisateur du site.
 </p>

    <p>
    Un fichier de documentation <a
href="http://www.texinfo.org" target="_blank">Texinfo</a>
est également disponible <em><a href="/README.texi"
target="_blank">Webmastering FSF Europe</a>"</em> de <a
href="mailto:oberg@fsfeurope.org">Jonas Öberg</a>, le développeur du système de construction des pages. Lisez-le afin de mieux comprendre le fonctionnement des pages web.
    </p>
  </body>

  <timestamp>$Date$ $Author$</timestamp>
  <translator>Michel Roche (Vercors - France), Jil Larner (Mont Blanc, France)</translator>
</html>
<!--
Local Variables: ***
mode: xml ***
End: ***
-->
