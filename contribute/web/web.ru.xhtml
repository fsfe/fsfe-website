<?xml version="1.0" encoding="UTF-8" ?>
<html>
<head>
<title>Информация для вебмастеров – ЕФСПО</title>
</head>
<body>

<p id="category"><a href="/contribute/">Присоединяйтесь!</a></p>

<h1>Вебмастерам</h1>

<p id="introduction">
<em>Команда вебмастеров</em> разрабатывает и поддерживает сайты ЕФСПО, начиная с <a href="/">fsfe.org</a> и заканчивая сайтами проектов и кампаний. Вебмастеры – это добровольцы, которые улучшают внешний вид организации и совершенствуют техническую составляющую деятельности Фонда в Интернете.
</p>

<h2>Введение</h2>

<p>
Технологии и программы, которые используются в работе веб-страниц ЕФСПО, хорошо знакомы многим разработчикам и могут представлять интерес для тех, кто ещё только начинает знакомство с ними.
</p>

<p>
Переводчики и другие добровольцы в своей работе, скорее всего, столкнутся только с:
</p>

<ul>
<li>
Файлы <a href="http://ru.wikipedia.org/wiki/XHTML">XHTML</a>, из которых генерируются веб-страницы.
</li>
<li>
Систему <a href="http://subversion.tigris.org/">Subversion</a>,  с помощью которой можно посмотреть изменения, сделанные другими участниками.
</li>
<li>
Систему <a href="http://trac.edgewall.org/">Trac</a> – инструмент управления проектами и отслеживания ошибок в программном обеспечении.
</li>
</ul>

<p>
Те же, кто хочет помочь с поддержкой сайтов, должны также знать
</p>

<ul>
<li>
<a href="http://www.perl.org/">Perl</a> – поддержка веб-страниц и написание сценариев для их генерации.
</li>
<li>
<a href="http://www.apache.org/">Apache</a> – веб-сервер.
</li>
</ul>

<h2>Как устроены веб-страницы</h2>

<p>
Страницы сайта <var>fsfe.org</var>  хранятся в виде набора файлов XML, из которых веб-сервер каждые десять минут автоматически создаёт страницы HTML. Таким образом, редактируются только файлы XML, а страницы HTML никогда напрямую не затрагиваются.
</p>

<p>
Название каждой страницы на <var>fsfe.org</var> состоит из <var><em>названиестраницы</em>.<em>язык</em>.html</var>, где <em>язык</em> соответствует одному из сокращённых названий языков по стандарту <a href="http://ru.wikipedia.org/wiki/ISO_639">ISO-639</a>, например, «en» – английский,  «de» – немецкий. Названия исходных файлов состоят из <var><em>названиестраницы</em>.<em>язык</em>.xhtml</var>.
</p>

<p>
На некоторых страницах, помимо фиксированного текста из файла XHTML, есть динамические вставки. Это значит, что при их создании веб-сервер берёт текст из нескольких файлов XML. Если в одном из этих файлов текст не переведён, то будет вставлен фрагмент оригинальной страницы на английском языке. Именно так на сайте возникают страницы с текстом на двух языках. Примеры страниц с динамическими вставками: <a href="/">домашняя страница</a>, <a href="/news/">страница новостей</a> и <a href="/events/">страница событий</a>.
</p>

<h2>Как получить доступ к веб-страницам?</h2>

<p>
Исходные файлы веб-страниц хранятся в <a href="https://trac.fsfe.org/fsfe-web/browser">репозитории</a>, размещённом на сервере ЕФСПО. Просмотреть содержимое репозитория можно через систему <a href="https://trac.fsfe.org/fsfe-web">Trac</a>.
</p>

<p>
Получить доступ к этим инструментам можно следующим образом:
</p>

<ul>
<li>
<p>
Если вы член <a href="http://fellowship.fsfe.org">Содружества ЕФСПО</a>, у вас уже есть доступ для чтения, нужно лишь ввести логин и пароль.
</p>

<p>
Если вы хотите получить доступ для записи (к репозиторию или к вики системы Trac), напишите об этом по адресу <a href="mailto:system-hackers@fsfeurope.org">system-hackers@fsfeurope.org</a>.
</p>
</li>

<li>
<p>
Если вы не являетесь членом Содружества, вы можете <a
href="https://trac.fsfe.org/fsfe-web/register">зарегистрироваться</a> в качестве гостя. Таким образом вы получите доступ для чтения в репозитории и в системе Trac (при вводе логина добавьте префикс <var>guest-</var>). Администратор репозитория получит автоматическое уведомление и активирует доступ для записи.
</p>
</li>
</ul>

<h3>Извлечение рабочих копий</h3>

<p>
В репозитории Subversion есть две основных ветви текстов для сайта ЕФСПО: ветвь <a href="https://trac.fsfe.org/fsfe-web/browser/trunk"><em>trunk</em></a> для главной версии сайта <a href="http://fsfe.org/">http://fsfe.org/</a> и ветвь <a href="https://trac.fsfe.org/fsfe-web/browser/branches/test"><em>test</em></a> для тестовой версии сайта <a href="http://test.fsfe.org/">http://test.fsfe.org/</a>.
</p>

<p>
Для повседневной работы, например, добавления новостей и новых переводов (или даже для внесения небольших изменений в код веб-сайта), нужно извлечь ветвь trunk:
</p>

<p class="terminal">svn --username <var>ВАШЕИМЯ</var>  co https://svn.fsfe.org/fsfe-web/trunk</p>

<p>
Большие изменения в коде сайта, включая отладку новых функций, которые могут нарушить его нормальную работу лучше предварительно испытывать на тестовой ветви репозитория <em>test</em>:
</p>

<p class="terminal">svn --username <var>ВАШЕИМЯ</var>  co https://svn.fsfe.org/fsfe-web/branches/test</p>

<p>
Обратите внимание – чтобы извлечь весь репозиторий потребуется около 160 Мб дискового пространства. Если вы хотите работать над определённой частью сайта, можно извлечь только её. <a href="https://trac.fsfe.org/fsfe-web/browser">Просмотреть содержимое репозитория</a> и выбрать файлы для копирования можно через систему Trac.
</p>

<h2>Как работать с репозиторием?</h2>

<p>
После того, как нужные файлы извлечены, необходимо выполнять обновление
</p>

<p class="terminal">$ svn update</p>

<p>
каждый раз перед тем, как приступить к работе.
</p>

<p>
Если вы хотите добавить в репозиторий новые файлы или каталоги, нужно выполнить
</p>

<p class="terminal">$ svn add <em>название файла</em></p>

<p>
Для того чтобы добавить файлы на сервер, будь то новый или изменённый файл, выполните
</p>

<p class="terminal">$ svn commit <em>название файла</em></p>

<p>
Откроется редактор, который у вас установлен по умолчанию, чтобы добавить примечание.
</p>

<p>
В системе Subversion <a href="http://svnbook.red-bean.com/en/1.5/svn.advanced.props.special.keywords.html">замена ключевых слов</a> должна включаться явным образом для каждого файла. Поскольку некоторые ключевые слова используются в файлах <var>.xml</var> и <var>.xhtml</var> (например, <var>$</var><var>Author</var><var>$</var> – ключевое слово в нижнем колонтитуле страницы), вы можете настроить автоматическую замену ключевых слов, добавив следующий текст в файл <var>~/.subversion/config</var>:
</p>

    <pre class="file">
enable-auto-props = yes

[auto-props]
*.xml = svn:keywords=Date Author Id Revision;svn:mime-type=text/xml;svn:eol-style=native
*.xhtml = svn:keywords=Date Author Id Revision;svn:mime-type=text/xhtml;svn:eol-style=native
    </pre>

<p>
Если вы знакомы с программой CVS, вы легко разберётесь с SVN, так как основные команды очень похожи. О различиях между CVS и SVN можно почитать на странице <a href="http://svnbook.red-bean.com/en/1.5/svn.forcvs.html">Subversion для пользователей CVS</a>, а сравнение команд CVS и SVN представлено в <a href="http://svn.apache.org/repos/asf/subversion/trunk/doc/user/cvs-crossover-guide.html">Руководстве по переходу с CVS на SVN</a>. 
</p>

<p>
Загрузить подробное руководство по SVN  можно на странице <a href="http://svnbook.red-bean.com/">Subversion book</a> (ЕФСПО использует SVN версии 1.5).
</p>

<h2>Координация работ</h2>

<p>
Работа над страницами сайта координируется через <a href="http://mail.fsfeurope.org/mailman/listinfo/web">список рассылки для вебмастеров</a>.
</p>

<p>
Система <a href="https://trac.fsfe.org/fsfe-web">Trac</a> также предоставляет ряд инструментов для координации работ: браузер репозитория SVN, систему отслеживания задач и вики.
</p>

<p>
Более подробная информация о  системе Trac опубликована в виде <a href="https://trac.fsfe.org/fsfe-web/wiki/TracGuide">Руководства</a> на странице вики.
</p>

<p>
Если вы хотите получать информацию обо всех изменениях в репозитории, подпишитесь на  <a href="http://mail.fsfeurope.org/mailman/listinfo/web-cvs-notify">список рассылки уведомлений об изменениях</a>.
</p>

<h2>Доступ для записи и ответственность</h2>

<p>
Если у вас есть доступ для записи, подпишитесь на <a href="http://mail.fsfeurope.org/mailman/listinfo/web">список рассылки для вебмастеров</a>.
</p>

<p>
Обратите внимание – все изменения, которые вы внесёте, станут видны автоматически. Поэтому просим вас при каждой загрузке новых или обновлённых файлов в репозиторий помнить, что:
</p>

<ul>
<li>
<p>
ЕФСПО несёт ответственность за содержание веб-страниц. Не публикуйте изменения, которые могут исказить значение текста, без одобрения <a href="/about/members.html">членов ассоциации ЕФСПО</a>. (Актуально только для оригинальных страниц на английском языке.)
</p>
</li>

<li>

<p>
Если вы помогаете ЕФСПО с переводом, старайтесь всегда отдавать текст на проверку при наличии такой возможности. Подпишитесь на <a href="http://mail.fsfeurope.org/mailman/listinfo/translators">список рассылки для переводчиков</a>, чтобы узнать, может ли кто-нибудь вам помочь. Желательно также всегда пользоваться автоматическими средствами проверки орфографии, например, <a href="http://aspell.net/">GNU aspell</a>,
ispell или любыми другими.  Установите файл <em>aspell</em> и <em>aspell-<strong>XX</strong></em> (где "XX" – двухбуквенный код языка) и выполните:
</p>

<p class="terminal">
aspell -H -d <em>language</em> -c file.xhtml
</p>

<p>
где «language» – название словаря языка; <var>-d</var> – можно опустить, если региональные настройки системы UNIX совпадают с языком словаря.
</p>

</li>

<li>

<p>
Убедитесь, что все файлы в правильном формате XML. По умолчанию сервер SVN проверит синтаксис файлов XML с разрешением .xml и .xhtml и отменит загрузку, если обнаружит ошибки. Также файлы можно самостоятельно проверить перед загрузкой одним из способов, перечисленных ниже.
</p>
<p>
С помощью сценария <var>/trunk/tools/validate.pl</var>. Он найдёт ошибки в разметке, которые могут вывести из строя автоматическое обновление страниц на сайте ЕФСПО. Если у вас сложилось впечатление, что процесс создания страниц нарушен, <a href="http://status.fsfe.org/">посмотрите журнал событий последней рабочей версии</a> на <a href="http://status.fsfe.org/">странице состояния веб-сервера</a>.
</p>

<p>
Для сценария <var>validate.pl</var> нужен модуль Perl <em>XML::LibXML</em>. Если он не установлен, можно проверить файлы через любую другую программу проверки правильности разметки XML. Например, можно использовать программу <em>xmllint</em> с доступом из командной строки, разработанную в рамках проекта <a href="http://xmlsoft.org/"><em>libxml2</em></a>.
</p>

<p>
Если вы используете операционную систему Debian GNU/Linux, установите пакет <em>libxml2-utils</em> и выполните команду:
</p>

<p class="terminal">xmllint --noout <em>file</em>.xhtml</p>

<p>
где <em>file</em> – название файла, который вы хотите проверить. Если программа обнаружит ошибку, появится соответствующее сообщение.
</p>

</li>

<li>

<p>
Убедитесь, что кодировка файла совпадает с названием кодировки в его верхней части (там, где слово «encoding»). Например, если файл сохранён в кодировке «iso-8859-1» (latin-1), то в первой строке должно быть написано:
</p>

<p class="file">&lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;</p>

<p>
Другая допустимая кодировка – «UTF-8». Изменить кодировку файла можно с помощью стандартной программы <em>iconv</em> следующим образом (пример конвертации файла из «latin1» в «UTF-8»):
</p>

<p class="terminal">iconv -f LATIN1 -t UTF8 <em>inputfile</em> &gt; <em>outputfile</em></p>

</li>
</ul>

<p>
При добавлении файлов в репозиторий обязательно координируйте свои действия с другими добровольцами, у которых тоже есть доступ для записи, чтобы добавления новых и обновлённых файлов были правильными. И, конечно же, проверяйте файлы перед тем, как загрузить их в репозиторий.
</p>

 <h2>Дополнительная информация</h2>

<p>
Структура <em>fsfe.org</em> довольно сложна и скрыта от глаз простого пользователя из-за того, что на сайте есть страницы как для аудитории в масштабах всей Европы и мира, так и страницы с информацией для конкретных стран.
</p>

<p>
Если вы хотите не только переводить страницы, но и помогать на других направлениях, ознакомьтесь со <a href="Webpage-Structure.txt" target="_blank">структурой сайта</a>.
</p>

<p>
Или скачайте файл руководства <em><a href="/README.texi" target="_blank">«Вебмастерам ЕФСПО»</a></em> в формате <a href="http://www.texinfo.org" target="_blank">Texinfo</a>, который написал <a href="mailto:oberg@fsfeurope.org">Йонас Оберг</a>. Он также внедрил систему компиляции страниц HTML из файлов XML. В руководстве подробно разобран механизм работы веб-страниц.
</p>

</body>

<timestamp>$Date: 2010-01-26 16:32:06 +0000 (Tue, 26 Jan 2010) $ $Author: sstavra $</timestamp>
</html>
<!--
Local Variables: ***
mode: xml ***
End: ***
-->
