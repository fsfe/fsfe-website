\input texinfo                @c -*- Texinfo -*-
@c %**start of header
@setfilename sysadmin-france.info
@settitle @code{System Administration France}
@setchapternewpage odd
@c %**end of header

@set RCSID $Id: sysadmin-france.en.texi,v 1.29 2001-04-30 13:22:11 loic Exp $
@set VERSION 1.0

@c Combine the variable and function indices:
@syncodeindex vr fn
@c Combine the program and concept indices:
@syncodeindex pg cp

@titlepage
@title System Administration France
@subtitle Information specific to GNU and FSF machines in France
@subtitle @code{Sysadmin France} Version @value{VERSION}
@author Loic Dachary, Rodolphe Quiedeville
@page
@vskip 0pt plus 1filll

 Permission is granted to make and distribute verbatim copies of
 this manual provided the copyright notice and this permission notice
 are preserved on all copies.

 Permission is granted to copy and distribute modified versions of this
 manual under the conditions for verbatim copying, provided that the entire
 resulting derived work is distributed under the terms of a permission
 notice identical to this one.

 Permission is granted to copy and distribute translations of this manual
 into another language, under the above conditions for modified versions,
 except that this permission notice may be stated in a translation approved
 by the Free Software Foundation.
@end titlepage
@page

@ifnottex
@node Top, Introduction, (dir), (dir)
@top Sysadmin France

This document is for system administrators, webmasters and users of GNU
and FSF machines in France.

@end ifnottex

@menu
* Introduction::                
* XML and interoperability::    
* Accounts::                    
* Web::                         
* Private Data::                
* System::                      
* Concept Index::               
* Name Index::                  

@detailmenu
 --- The Detailed Node Listing ---

Accounts

* System Passwords::            
* Account Create::              
* Account Access::              
* Account Update::              
* Account Delete::              
* Account www::                 
* Cron Job::                    

Web

* Overview::                    
* Virtual Hosts::               
* Editing the Web::             
* Separate layout and content::  
* Publishing news::             
* Update from CVS::             
* Nightly script::              
* Immediate Update::            

Separate layout and content

* XHTML and XSLT Quick Start::  
* XSLT processors::             
* Writing XHTML content::       
* XSL and generated HTML::      
* Writing XSL files::           

System

* Security::                    
* DNS::                         
* Statistics::                  

Security

* Firewall::                    

Statistics

* Installation::                
* Output::                      

@end detailmenu
@end menu

@node Introduction, XML and interoperability, Top, Top
@chapter Introduction

No information on the philosophical and political goals of the
@uref{http://www.fsfeurope.org/,,FSF Europe} in general and the
@uref{http://france.fsfeurope.org/,,FSF France} in particular can be
found in this document. 

The machines donated to FSF France and hosted in France are part of the
set of machines available to the GNU project. As such they follow the
same rules and the same policy.

In many aspects, the GNU way of doing things needs to be improved. When
this is the case the idea is to coordinate with the GNU volunteers in
charge of a specific aspect in order to improve the system. Doing so is
a lot easier than contributing to a software. It may sometime be
furstrating to stick to the GNU policy because it is easier to have a
quick and nice result by inventing something completly new. The Web is
probably the most striking example. However, since we claim to be part
of the GNU project we don't really have the option to fork something of
our own and leave the GNU project behind. Even if it means that we will
go slower, coordination with and improvement of the GNU project as a
whole should be our goal.

Close cooperation with the GNU project also makes some things a lot
easier. The account creation process, the management of the HTML tree
from CVS, the DNS hosting, mailing lists etc. are facilities we do not
need to re-implement. When installing something entirely new on the FSF
France machines, it is important to send a note on the relevant mailing
lists in advance. This prevents possible duplication of the effort and
greatly increases the chances that the GNU project will be able to
re-use the new facility.

Reference documents describing the GNU environment are
@uref{http://www.gnu.org/server/standards/,,standards} for webmaster
information, @file{fencepost.gnu.org:/gd/gnuorg/sysadmin/sysadmin.texi}
for system administration information and the
@uref{http://savannah.gnu.org/savannah.html,,Savannah admin guide} for
usage of the SourceForge clone.

@node XML and interoperability, Accounts, Introduction, Top
@chapter XML and interoperability

When publishing content or building a database for specific purposes (contact
database, task lists, account information, permissions etc.) it is of the
outermost importance to choose a data format that allows other programs
to re-use the database and your own program to import databases from other
programs. 

Using XML for that purpose is only half of the answer. XML will merely
prevent you to write a parser to read XML files and save you from the
pitfall of inventing yet another data format. It says nothing about the
semantic of the tags you decided to use. The harder part is to define
the semantic associated with an XML file. For instance,
@uref{http://www.docbook.org/,,DocBook} uses XML but the core of the
work was to define what each tag means and make sure it covers all 
possible needs. It tooks years and is not finished yet. Inventing a new
semantic for a given purpose is not something that should be undertaken
lightly.

In some cases there already exists a semantic that fits your needs. Even
if it's not an established standard
(@uref{http://groups.yahoo.com/group/rss-dev/files/specification.html,,RSS}
is a widely spread de-facto standard) it will save you the effort to invent
something completly new. You may even be able to join the group that works
on this semantic to enhance it if needs be. There are some DTD repositories
that can help you find out if something exists:

@itemize @bullet

@item @uref{http://www.xml.com/pub/rg/DTDs,,XML.com DTD}

@item @uref{http://www.rosettanet.org/rosettanet/Rooms/DisplayPages/LayoutInitial?Container=com.webridge.entity.Entity%5BOID%5B6EDB5FE87F69D411BD84009027E33DD8%5D%5D,,RosettaNet}

@item @uref{http://www.hr-xml.org/schemas/dtd/,hr-xml.org}

@item @uref{http://www.schema.net/,,Schema.net}

@item @uref{http://registry.xml.org:2020/repository/ui/searchResults.jsp?qall=dtd,,XML.org}

@item @uref{http://www.openapplications.org/_vti_bin/shtml.exe/xml/loadform.htm,,Open Applications Group}

@item @uref{http://www.lisa.org/tmx/tmx.htm,,Translation Memory eXchange}

@item @uref{http://www.docuverse.com/xlf/index.html,,Extensible Log Format}

@end itemize

When the data format is chosen, chosing or writing the programs that provide
a given service is driven by this choice. If an application exists that does
not support the format chosen, it's fairly reasonable to write a small program
that translate the data format into the application specific data and vice
versa. The advantages of doing this are:

@itemize @bullet

@item If a new, better program becomes available and you can switch to it using
the chosen data format do dump/reload the data.

@item If you contribute the export/import program to the developers of the
program they are likely to accept it because it's based on a standard.

@item If you want to display static HTML pages from the XML export, XSLT
allows to do this in a fairly simple way.

@end itemize

@node Accounts, Web, XML and interoperability, Top
@chapter Accounts

@menu
* System Passwords::            
* Account Create::              
* Account Access::              
* Account Update::              
* Account Delete::              
* Account www::                 
* Cron Job::                    
@end menu

@node System Passwords, Account Create, Accounts, Accounts
@section System Passwords

If you need the password of system users such as root or www you
should ask to the following persons:

@itemize

@item @email{rq@@lolix.org,Rodolphe Quiedeville}

@item @email{loic@@gnu.org,Loic Dachary}

@end itemize

@node Account Create, Account Access, System Passwords, Accounts
@section Account Create

@cindex shell account
@cindex fsffr and shell account

The user accounts on @code{france.fsfeurope.org} are managed with
@uref{http://savannah.gnu.org/,,Savannah}. If someone need a shell
account on @code{france.fsfeurope.org} he has to get an account on
@uref{http://savannah.gnu.org/,,Savannah} first. Then he should send
a mail to one of the project administrators of the 
@uref{http://savannah.gnu.org/projects/fsffr/,,fsffr} project. The
project administrator adds him as a member of the 
@uref{http://savannah.gnu.org/projects/fsffr/,,fsffr} project. Within
24 hours a cron job on @code{france.fsfeurope.org} will fetch the
new user from Savannah and create the account. 

@node Account Access, Account Update, Account Create, Accounts
@section Account Access

@cindex shell account ssh
@cindex ssh shell account
@cindex ssh public key
@cindex password ssh
@cindex ssh and password 
Once the account is created, access to the machine is available using
ssh and a public key. The Savannah password will not work on 
@code{france.fsfeurope.org}. When logged on 
@uref{http://savannah.gnu.org/projects/fsffr/,,fsffr} it is possible
to register one or more public key at 
@uref{http://savannah.gnu.org/account/editsshkeys.php,,Edit SSH Keys}. 

@node Account Update, Account Delete, Account Access, Accounts
@section Account Update

@cindex public key update
@cindex ssh public key update
Once a day the ssh public keys of every account on
@code{france.fsfeurope.org} are updated from the information fetched on
Savannah. If the @file{authorized_keys} file of a user is manualy updated,
it will be overwritten. 

@node Account Delete, Account www, Account Update, Accounts
@section Account Delete

When a user is not listed anymore in the 
@uref{http://savannah.gnu.org/projects/fsffr/,,fsffr}, its account is
disabled on @code{france.fsfeurope.org}. The home directory is not 
deleted and if the user is added again at a later time, he will retrieve
his former home directory. 

@node Account www, Cron Job, Account Delete, Accounts
@section Account www

Every account created automatically as described above is also granted
an access to the @code{www} user which owns the directory in which all
the document roots of the apache server are : @file{/home/www}.

This is simply done by appending the public keys of all the users to the
@file{authorized_keys} file of the @code{www} user. 

@node Cron Job,  , Account www, Accounts
@section Cron Job

The @file{/usr/local/bin/savannah_users} script does the update. It
is run from the @file{/etc/cron.d/savannah_users} cron file and spits
log information in @file{/var/log/savannah_users.log}. The log file
is rotated according to the @file{/etc/logrotate.d/savannah_users}
specification.

Savannah does not serve account information anonymously. The 
@code{france.fsfeurope.org} machine is explicitly allowed to retrieve
the relevant information in XML. For more information check the
@uref{http://savannah.gnu.org/savannah.html#Account%20Management,,Account Management} chapter of the Savannah documentation.

@node Web, Private Data, Accounts, Top
@chapter Web

@menu
* Overview::                    
* Virtual Hosts::               
* Editing the Web::             
* Separate layout and content::  
* Publishing news::             
* Update from CVS::             
* Nightly script::              
* Immediate Update::            
@end menu

@node Overview, Virtual Hosts, Web, Web
@section Overview

The FSF Europe web sites are stored in CVS on the GNU machines. They
can be edited from there and the france.fsfeurope.org has a local copy
of all the pages that are updated every hour. The primary purpose of
the france.fsfeurope.org machine is to host the FSF France web site,
data and programs. However every web site related to the GNU project
and friends of the GNU project are invited to use the machine for web
hosting if they need it.

@node Virtual Hosts, Editing the Web, Overview, Web
@section Virtual Hosts

The @file{/etc/apache/httpd.conf} was configured with virtual hosts. It
handles the following domain names:

@table @samp
@item france.fsfeurope.org
with a document root at @file{/var/www/france.fsfeurope.org}
that points to @file{/home/www/fsfe/fr}.

@item www.france.fsfeurope.org, fr.fsf.org, www.fr.fsf.org
with a redirect to france.fsfeurope.org

@end table

All new domains should use a similar policy, that will help keeping
things simple.

@node Editing the Web, Separate layout and content, Virtual Hosts, Web
@section Editing the Web

@cindex fsfe project
@cindex edit france.fsfeurope.org

All users registered in the
@uref{http://savannah.gnu.org/projects/fsfe/,,FSF Europe} project can
edit the HTML repository using CVS/SSH. Instructions on how to do so can
be found on @uref{http://savannah.gnu.org/cvs/?group_id=53,,Savannah}.
The modified files will be updated on france.fsfeurope.org within one
hour. They will be available immediately after a commit on
http://www.gnu.org/fsfe/ which is convenient for testing.

The pages are stored in @code{.xhtml} files and formated automaticaly
to @code{.html} files. @ref{XHTML and XSLT Quick Start} will tell you
how to deal with this within seconds.

@node Separate layout and content, Publishing news, Editing the Web, Web
@section Separate layout and content

@cindex SSI
It is convenient to separate the layout of an HTML page from the actual
content. It prevents duplicating the menus in each page and allows to 
have a nice display without the burden of fixing it in every page when
something needs fixing. Using SSI (Server Side Includes) is a solution
to this problem but it has the disadvantage that it requires from
web server displaying the pages to have this feature enabled, which is
not always the case. 

@cindex XSLT
@cindex XHTML

We chose to use an @uref{http://www.w3c.org/TR/xslt,,XSLT}
processor to separate the content from the layout. An XSLT processor
provides something similar to a C preprocessor but is applied to XML
files. The content of the pages are written in 
@uref{http://www.w3.org/TR/xhtml1,,XHTML}, which is a slightly
different form of HTML that makes it XML compliant. The layout of the
pages is stored in XSL files and the XSLT processor merges the two to
produce an HTML page that will be used for display.

@example

XSL file    ----\
                 => XSLT processor ----> HTML file
XHTML file  ----/

@end example

We chose to use XSL rather than any other method because it is 
a widely accepted standard and that Free Software tools are available
everywhere that implement it. There are many possible uses of XSL but
this chapter only focuses on using it to separate the layout of a
web site from it's content.

@menu
* XHTML and XSLT Quick Start::  
* XSLT processors::             
* Writing XHTML content::       
* XSL and generated HTML::      
* Writing XSL files::           
@end menu

@node XHTML and XSLT Quick Start, XSLT processors, Separate layout and content, Separate layout and content
@subsection XHTML and XSLT Quick Start

@cindex edit .xhtml files
@cindex .xhtml files editing
@cindex XHTML and XSLT quick start
@cindex XSLT and XHTML quick start

Assuming you're facing a directory that contains a mixture of 
@code{.xhtml}, @code{.html} and/or @code{.xsl} files and you just
want to contribute content without actually understanding what all
this about, here is what you should do:

@itemize @bullet

@item Modify the @code{.xhtml} file, not the generated @code{.html} file.

@item If you want to create a new file, create it with the @code{.xhtml}
extension. Copy a @file{boilerplate.xhtml} from @uref{http://france.fsfeurope.org/boilerplate.xhtml,,somewhere} or copy and modify a @code{.xhtml} file
in the same directory.

@item To see the resulting HTML file, look for a Makefile in the directory
or the upper directories that recursively walk the tree to format XHTML
files into HTML files. If a grep @code{sabcmd} or @code{xsltproc} on a
Makefile finds something, you probabl found the good one. Run @code{make
all} and look at the generated HTML file with your web browser.

@item To add a menu entry, edit the XSL file that ends with the @code{.xsl}
extension. It should contain the menu entries: that's why they are
created in the first place. Although the syntax of this file may not be
familiar, the menu entries themselves are written in plain XHTML.

@cindex your own XSL files
@cindex XSL files of your own
@item To re-use existing XSL files for your own web pages do the following

@example

#
# Make sure you have the sablotron XSLT processor
#
apt-get install sablotron
#
# Get the XSL files
#
wget http://france.fsfeurope.org/navigation.fr.xsl
wget http://france.fsfeurope.org/fsfe-fr.xsl
#
# Get the Makefile
#
wget http://france.fsfeurope.org/Makefile
#
# Get the boilerplate
#
wget http://france.fsfeurope.org/boilerplate.fr.xhtml
#
# edit fsfe-fr.xsl and remove all references to navigation.*.xsl other
# than navigation.en.xsl.
#
# Build the boilerplate.fr.html file
#
make all
#
# View boilerplate.fr.html with a web browser and start customizing 
#
@end example


@end itemize

@node XSLT processors, Writing XHTML content, XHTML and XSLT Quick Start, Separate layout and content
@subsection XSLT processors

There are many XSLT processors. We recommend the following two:

@itemize @bullet

@cindex sabcmd
@cindex sablotron
@item @uref{http://www.gingerall.com/charlie-bin/get/webGA/act/download.act,,sablotron}

@cindex libxslt
@cindex xsltproc
@item @uref{http://www.xmlsoft.org/,,libxslt}

@end itemize

@node Writing XHTML content, XSL and generated HTML, XSLT processors, Separate layout and content
@subsection Writing XHTML content

@cindex XHTML rules

The content of the web site is written in XHTML files that have
the @code{.xhtml} extension. The XHTML looks like a regular HTML 
file, you don't have to learn anything new. Taking an existing HTML
file and converting it to XHTML is simple. You only have to take
care of the following:

@itemize @bullet

@item Add the following at the beginning of the file:

@example
<?xml version="1.0" encoding="iso-8859-1" ?>
<!DOCTYPE html
          PUBLIC "-//W3C//DTD HTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
@end example

This declaration says that your file is in XHTML and that it contains
@code{iso-8859-1} characters.

@item Always close opening tags or the XSLT processor will bark. If
you want to use a single tag, end it with a />.

@example
<br />
<ul>
<li> Item 1 </li>
<li> Item 2 </li>
</ul>
@end example

@item Wrap the content of the page using the proper tags.

@example
<html>
  <head>
    <title>My Title</title>
  </head>
  <body>
     My stuff
  </body>
</html>
@end example

Web browsers may very well cope with the fact that you forget those but
XSLT processors will not.

@item Unlike html, tags and attribute names are case-sensitive and they are
    defined in @code{lower-case}. 

@example
<title> My Title </title>
@end example

@item Attribute values must be always inside quotes.

@example
<a href="URL">What is it</a>
@end example

@end itemize

@node XSL and generated HTML, Writing XSL files, Writing XHTML content, Separate layout and content
@subsection XSL and generated HTML

XSL is not able to deal with HTML that does not look like XML (XHTML). 
Unfortunately most programs that generate HTML such as @code{makeinfo} or
@code{hevea} do not generate XHTML but plain HTML. In this case including
the generated HTML cannot be done with XSL. We suggest the following 
method:

@itemize @bullet

@item Add a SSI line to include the generated HTML file.

@example
<!--#include virtual="sysadmin-france.en.html"-->
@end example

@item After running the XSLT processor, replace the SSI line with the
content of the generated HTML file.

@example
perl -MFile::Copy -pi -e \
      '$| = 1; copy("$1", \*STDOUT) if(/\#include virtual=\"(.*?)\"/);' \
      result.html
@end example

@end itemize

@node Writing XSL files,  , XSL and generated HTML, Separate layout and content
@subsection Writing XSL files

If you're only interested in modifying the menus that are located
in XSL files (those with the @code{.xsl} extension), you can consider
that XSL files are just XHTML files and forget about the rest. 

@cindex re-use XSL example
@cindex XSL examples
To create your own XSL file without learning XSL, copy the XSL files
of the @uref{http://france.fsfeurope.org/,,FSF France} web site
and change them to your liking. The
@ref{XHTML and XSLT Quick Start} chapter will give you instructions
to do this.

@cindex XSL learning curve
It takes a few days to get accustomed to
@uref{http://www.w3.org/TR/xslt,,XSLT}. If you're familiar with @uref{
http://www.gnu.org/software/m4/,,m4} you'll find that
easy. Otherwise it will look very strange because it looks like a
programing language but is really a data transformation language.

@cindex XSL pitfall
A common pitfall when dealing with XSL is to try to use its most
advanced features and this may lead to XSL files that are complex and
very hard to understand and debug. Since XSL has almost all the features
of a programming language (loops, variables, conditions, functions,
etc.) but none of it's facilities (debugger, profiler etc.), complex
XSL files will make your life a living hell. It may worth the effort
(for @uref{http://sourceforge.net/projects/docbook/,,DocBook}
transofrmation to HTML for instance) you have to carefully evaluate
the pro and cons in advance.

A good XSL file is a file that even someone not accustomed to XSL could
figure out, even if he won't be able to modify it's structure. Check the
@uref{http://france.fsfeurope.org/navigation.en.xsl,,english menus} of
the @uref{http://france.fsfeurope.org/server/server.en.html,,FSF France}
web site for an example.

@node Publishing news, Update from CVS, Separate layout and content, Web
@section Publishing news

The @file{fsfe/fr/news} directory contains news articles. The structure
of the directory is as follows:

@itemize @bullet

@item Each article is in a file named @file{articleYYYY-MM-DD-NN.LG.xhtml}
where YYY-MM-DD is the date of publication, NN a two digit serial number
if two or more news are published the same day, LG is the language code
in lower case.

@example
article2001-04-26-01.fr.xhtml
@end example

@item
If an article contains subparts or pictures a directory named
@code{articleYYYY-MM-DD-NN} is created and all elements are added into
it. No specific convention is to be followed in this subdirectory.

@item 
A
@uref{http://groups.yahoo.com/group/rss-dev/files/specification.html,,RSS}
file must be built for each language with a file name of
@file{fsfe-fr-channel.LG.xml} where LG is the language code in lower
case. It's ok to use RSS-0.91 instead of RSS-1.0 since the later is
backward compatible. Whenever an article is added in the news directory,
a corresponding @code{item} entry should be added to the RSS file
corresponding to the language.

@item
An XSL file must be provided for each language with the name
@file{news.LG.xsl}. This XSL file will be used to format the
corresponding @file{fsfe-fr-channel.LG.xml} into a
@file{news-bytes.LG.xhtml} file by the top level makefile. LG is the
language code in lower case

@end itemize

@file{fsfe/fr/Makefile} is responsible of applying the
@file{fsfe/fr/news/news.LG.xsl} files to the
@file{fsfe/fr/news/fsfe-fr-channel.LG.xml} channels in order to produce the
@file{fsfe/fr/news/news-bytes.LG.xhtml}. The @file{fsfe/fr/index.fr.xhtml}
includes the news using the following:

@example
<?xml version="1.0" encoding="iso-8859-1" ?>
<!DOCTYPE html
          PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
          [<!ENTITY news SYSTEM "news/news-bytes.fr.xhtml">]>
...

          &news;
...
@end example

Other pages may do the same where appropriate. 

If a remote site wants to print the news, the webmaster is free to use
the RSS channels for this purpose. We should even encourage this. At present
the following web sites read the RSS channels:

@itemize @bullet

@item SomeNews.org, contact @email{penso@@linuxfr.org, Fabien Penso},
@uref{http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/somenews/config/francefsf.cnf,,sources du plugin}.

@end itemize

The RSS availables at present are:

@itemize @bullet

@item @uref{http://france.fsfeurope.org/news/fsfe-fr-channel.fr.xml,,FSF France} French

@item @uref{http://france.fsfeurope.org/news/fsfe-fr-channel.en.xml,,FSF France} English

@end itemize

@node Update from CVS, Nightly script, Publishing news, Web
@section Update from CVS

@cindex www.gnu.org
@cindex france.fsfeurope.org updates
@cindex www.fsfeurope.org updates

A @code{cvs update} is done every hour in the
@file{/home/www/fsfe} directory by the
@file{/etc/cron.d/www} user crontab.  The logs of the update are stored
in @file{/var/log/www.log} and rotated by
@file{/etc/logrotate.d/www}. 

Note that this update does not generate the HTML pages from the XHTML
pages. The @ref{Nightly script} takes care of this.

@node Nightly script, Immediate Update, Update from CVS, Web
@section Nightly script

The @file{/home/www/bin/nightly} script is run daily by the @code{www}
user and is in charge of the following:

@itemize @bullet

@item Run @code{cvs update} in the @file{/home/www/fsfe} directory.

@item Update the symbolic links according to the content of the
@file{.symlinks} files. See the @uref{http://www.gnu.org/server/standards/README.html#SEC01,,Symbolic Links} chapter of the webmaster guidelines for
detailed information.

@item Run the @code{all} goal of all the Makefiles
found in the @file{/home/www/fsfe/} directory.
Those Makefiles are in charge of formating
the XHTML into HTML, formating @code{.texi} or @code{.tex} files into
HTML among other things.

@end itemize

The logs of the nightly script are stored in @file{/var/log/nightly.log}
and rotated by @file{/etc/logrotate.d/nightly}.

The @code{nightly} script can be run by hand after login as the @code{www}
user.

@node Immediate Update,  , Nightly script, Web
@section Immediate Update

If you ever want to update the web in no time you have to do the following:

@example
ssh -l www france.fsfeurope.org
cd fsfe
cvs -z3 -q update -I "*.html" -d
../bin/nightly
@end example

These actions are encapsulated in the @code{sync} goal of the 
@file{fsfe/fr/Makefile}. On your local machine type:

@example
make sync
@end example

@node Private Data, System, Web, Top
@chapter Private Data

Most if not all the private data of the FSF France is handled by the
@uref{http://savannah.gnu.org/projects/fsfeprivate,,FSF Europe Private
Data} project on Savannah. Its access is restricted to its members only,
there is no anonymous access. If you need to have access to this
repository write to @email{team@@fsfeurope.org,FSF Europe Team} or
@email{france@@fsfeurope.org,,FSF France}.

@node System, Concept Index, Private Data, Top
@chapter System

@menu
* Security::                    
* DNS::                         
* Statistics::                  
@end menu

@cindex security
@node Security, DNS, System, System
@section Security

@menu
* Firewall::                    
@end menu

@cindex firewall
@node Firewall,  , Security, Security
@subsection Firewall

A shell script applies filtering rules, it's located in
@file{/etc/init.d/firewall}. This script is compatible with kernel 2.2
and 2.4 and detects the kernel version using @file{uname}. @file{ipchains} is
used with 2.2 and @file{iptables} with 2.4.

Warning : only the ipchains (2.2) section is well configured.

The policy applied is to close all TCP/UDP port by default and open only
the ones we need.

@cindex DNS
@cindex fsffrance.org
@node DNS, Statistics, Security, System
@section DNS

The DNS is handled by the GNU name servers.
The FSF France machine can be reached through the following names : @code{fr.fsfeurope.org}, @code{france.fsfeurope.org} or @code{fsffrance.org}.

The latter domain name (@code{fsffrance.org}) has been bought at @uref{http://www.gandi.net,,GANDI}, a French registrar, and is owned by @email{raph@@r4f.org,Raphael Rousseau} who's the Administrative, Technical and Billing contact of this domain name.

The primary and secondary name servers are respectively  @code{ns1.gnu.org} (@code{199.232.76.162}) and @code{sfi.santafe.edu} (@code{192.12.12.1}).

@cindex statistics mrtg
@node Statistics,  , DNS, System
@section Statistics

Systems statistics are generated with mrtg
@uref{http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/}

@menu
* Installation::                
* Output::                      
@end menu

@node Installation, Output, Statistics, Statistics
@subsection Installation

mrtg and addons have been installed with apt-get, two packages :

@itemize
@item
mrtg version 2.8.9-1
@item
mrtgutils version 0.2
@end itemize

Some more scripts are used, they are located in @file{/usr/local/bin},
they are coming from @uref{http://mrtg.xidus.net/}

@itemize
@item
swapstat.sh
@item
stat.pl
@end itemize


@node Output,  , Installation, Statistics
@subsection Output

Output dir is @file{/var/www/france.fsfeurope.org/mrtg/}

@node Concept Index, Name Index, System, Top
@unnumbered Index of Concepts

@printindex cp

@node Name Index,  , Concept Index, Top
@unnumbered Index of File Names

@printindex fn

@summarycontents
@contents
@bye

