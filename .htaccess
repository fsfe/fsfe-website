RewriteEngine On

RewriteRule ^favicon.ico /graphics/fsfe.ico [redirect=permanent]
RewriteRule ^graphics/fsfeurope.ico /graphics/fsfe.ico [redirect=permanent]

RewriteRule ^(.*)\.no.html /$1.nb.html [redirect=permanent]
RewriteRule ^(.*)\.no.rss /$1.nb.rss [redirect=permanent]
RewriteRule ^contact/press(.*) /press/press$1 [redirect=permanent]
RewriteRule ^standards(.*) /projects/os$1 [redirect=permanent]
RewriteRule ^education(.*) /projects/education$1 [redirect=permanent]
RewriteRule ^ftf(.*) /projects/ftf$1 [redirect=permanent]
RewriteRule ^stacs(.*) /projects/stacs$1 [redirect=permanent]
RewriteRule ^gbn(.*) /projects/gbn$1 [redirect=permanent]
RewriteRule ^law/eucd/(.*) /projects/eucd$1 [redirect=permanent]
RewriteRule ^law(.*) /projects/law$1 [redirect=permanent]
RewriteRule ^swpat(.*) /projects/swpat$1 [redirect=permanent]
RewriteRule ^donate.html /donate/donate.en.html [redirect=permanent]

# Documents
RewriteRule ^documents/fp6(.*) /projects/fp6$1 [redirect=permanent]
RewriteRule ^documents/whatwedo(.*) /about/basics/whatwedo$1 [redirect=permanent]
RewriteRule ^documents/gnuproject(.*) /about/basics/gnuproject$1 [redirect=permanent]
RewriteRule ^documents/whyweexist(.*) /about/basics/whyweexist$1 [redirect=permanent]
RewriteRule ^documents/freesoftware(.*) /about/basics/freesoftware$1 [redirect=permanent]
RewriteRule ^documents/preamble(.*) /about/history/preamble$1 [redirect=permanent]
RewriteRule ^documents/doi(.*) /about/history/doi$1 [redirect=permanent]
RewriteRule ^documents/msooxml(.*) /projects/os/msooxml$1 [redirect=permanent]
RewriteRule ^documents/iprip(.*) /projects/wipo/iprip$1 [redirect=permanent]
RewriteRule ^documents/wiwo(.*) /projects/wipo/wiwo$1 [redirect=permanent]
RewriteRule ^documents/printable/(.*) /about/printable/$1 [redirect=permanent]
RewriteRule ^documents/reports/(.*) /about/reports/$1 [redirect=permanent]
RewriteRule ^documents/rms-fs-2006-03-09(.*) /freesoftware/transcripts/rms-fs-2006-03-09$1 [redirect=permanent]
RewriteRule ^documents/whyfs(.*) /campaigns/whyfs/whyfs$1 [redirect=permanent]
RewriteRule ^documents/eur5greve(.*) /about/basics/eur5greve$1 [redirect=permanent]
RewriteRule ^documents/20071219-opera-antitrust(.*) /about/basics/$1 [redirect=permanent]
RewriteRule ^documents/peru.en.txt /projects/un/peru.en.txt [redirect=permanent]

# New year's resolution in 2009.
RewriteRule ^2009$ /news/2009/nyr.html [redirect=permanent]
RewriteRule ^2009/$ /news/2009/nyr.html [redirect=permanent]

# Help section redirs.
RewriteRule ^help$ /contribute/ [redirect=permanent]
RewriteRule ^help/$ /contribute/ [redirect=permanent]
RewriteRule ^help/index(.*) /contribute/contribute$1 [redirect=permanent]
RewriteRule ^help/help(.*) /contribute/contribute$1 [redirect=permanent]
RewriteRule ^help/web\.(.*) /contribute/web/web.$1 [redirect=permanent]
RewriteRule ^help/(.*) /donate/$1 [redirect=permanent]

# Valentine campaign redirects.
RewriteRule ^valentine/(.*) /campaigns/valentine-2010/$1 [redirect=permanent]
RewriteRule ^valentine-2010/(.*) /campaigns/valentine-2010/$1 [redirect=permanent]
RewriteRule ^vd2010/(.*) /campaigns/valentine-2010/$1 [redirect=permanent]
RewriteRule ^campaigns/vd2010/vd2010(.*) /campaigns/valentine-2010/valentine-2010$1 [redirect=permanent]
RewriteRule ^campaigns/valentine-2010/vd2010(.*) /campaigns/valentine-2010/valentine-2010$1 [redirect=permanent]
RewriteRule ^campaigns/vd2010/(.*) /campaigns/valentine-2010/$1 [redirect=permanent]
RewriteRule ^campaigns/vd2010 /campaigns/valentine-2010/ [redirect=permanent]

# Temporary fix unitl we have a /freesoftware dir for contribute/advocacy/cwfs.en.html
RewriteRule ^freesoftware/freesoftware(.*) /about/basics/freesoftware$1 [redirect=temp]

# Rewrite for dead links to gnupg-ccid stuff
RewriteRule ^en/content/download/17665/125518/file/gnupg-ccid.rules http://wiki.fsfe.org/Card_howtos/Card_reader_setup_(udev)?action=AttachFile&do=view&target=gnupg-ccid.rules [redirect=permanent]
RewriteRule ^en/content/download/15872/77909/file/gnupg-ccid http://wiki.fsfe.org/Card_howtos/Card_reader_setup_(udev)?action=AttachFile&do=view&target=gnupg-ccid [redirect=permanent]

# from .symlinks files (and some of underlying .htaccess files to avoid conflicts)
## /projects directory
RewriteRule ^projects/community(.*) /projects/work$1 [redirect=permanent]
RewriteRule ^projects/legal(.*) /projects/work$1 [redirect=permanent]
RewriteRule ^projects/other(.*) /projects/work$1 [redirect=permanent]
RewriteRule ^projects/technical(.*) /projects/work$1 [redirect=permanent]
RewriteRule ^projects/wiwo(.*) /projects/wipo$1 [redirect=permanent]

## /projects/wsis directory
RewriteRule ^projects/wsis/cs-benchmarks\.(.*) /projects/wsis/cs-benchmarks-03-11-14.$1 [redirect=permanent]
RewriteRule ^projects/wsis/plenary-statement.html /projects/wsis/ps-20030923.en.html [redirect=permanent]
RewriteRule ^projects/wsis/FreeSoftware.html /projects/wsis/fs.en.html [redirect=permanent]
RewriteRule ^projects/wsis/cs-benchmarks.html /projects/wsis/cs-benchmarks-03-11-14.en.html [redirect=permanent]
RewriteRule ^projects/wsis/event.html /projects/wsis/event-03-12-10.en.html [redirect=permanent]

## /projects/swpat directory
RewriteRule ^projects/swpat/letter.en.html /projects/swpat/letter-20040510.en.html [redirect=permanent]
RewriteRule ^projects/swpat/letter.de.html /projects/swpat/letter-20040510.de.html [redirect=permanent]
RewriteRule ^projects/swpat/letter.html /projects/swpat/letter-20040510.en.html [redirect=permanent]
RewriteRule ^projects/swpat/appello.html /projects/swpat/letter-20050114-stanca.it.html [redirect=permanent]
RewriteRule ^projects/swpat/appello-it-mep.pdf /projects/swpat/letter-20050511-it-mep.pdf [redirect=permanent]

## /de/news/2004 directory
RewriteRule ^de/news/2004/navigator-20040917.de.html /news/2004/navigator-20040917.de.html [redirect=permanent]

## /news directory
RewriteRule ^news/article2001-10-20-01.de.html /news/2001/article2001-10-20-01.de.html [redirect=permanent]
RewriteRule ^news/article2001-10-20-01.en.html /news/2001/article2001-10-20-01.en.html [redirect=permanent]
RewriteRule ^news/article2001-10-20-01.es.html /news/2001/article2001-10-20-01.es.html [redirect=permanent]
RewriteRule ^news/article2001-10-20-01.fr.html /news/2001/article2001-10-20-01.fr.html [redirect=permanent]
RewriteRule ^news/article2001-10-20-01.it.html /news/2001/article2001-10-20-01.it.html [redirect=permanent]
RewriteRule ^news/article2001-10-20-01.pt.html /news/2001/article2001-10-20-01.pt.html [redirect=permanent]

## /news/2009
RewriteRule ^news/2009/index.html /news/2009/nyr.en.html [redirect=permanent]
RewriteRule ^news/2009/index.en.html /news/2009/nyr.en.html [redirect=permanent]
RewriteRule ^news/2009/index.de.html /news/2009/nyr.de.html [redirect=permanent]
RewriteRule ^news/2009/index.es.html /news/2009/nyr.es.html [redirect=permanent]
RewriteRule ^news/2009/index.fr.html /news/2009/nyr.fr.html [redirect=permanent]
RewriteRule ^news/2009/index.it.html /news/2009/nyr.it.html [redirect=permanent]
RewriteRule ^news/2009/index.pt.html /news/2009/nyr.pt.html [redirect=permanent]

## /news/2009/nyr directory
RewriteRule ^news/2009/nyr/index.html /news/2009/nyr.en.html [redirect=permanent]
RewriteRule ^news/2009/nyr/index.en.html /news/2009/nyr.en.html [redirect=permanent]
RewriteRule ^news/2009/nyr/index.es.html /news/2009/nyr.es.html [redirect=permanent]
RewriteRule ^news/2009/nyr/index.de.html /news/2009/nyr.de.html [redirect=permanent]
RewriteRule ^news/2009/nyr/index.fr.html /news/2009/nyr.fr.html [redirect=permanent]
RewriteRule ^news/2009/nyr/index.it.html /news/2009/nyr.it.html [redirect=permanent]
RewriteRule ^news/2009/nyr/index.pt.html /news/2009/nyr.pt.html [redirect=permanent]

# from underlying .htaccess files to avoid conflicts
## /projects/ftf directory
RewriteRule ^projects/ftf/rough-guide-for-users(.*) /projects/ftf/useful-tips-for-users$1 [redirect=permanent]
RewriteRule ^projects/ftf/rough-guide-for-vendors(.*) /projects/ftf/useful-tips-for-vendors$1 [redirect=permanent]
RewriteRule ^projects/ftf/contact(.*) /contact/contact$1#ftf [NE,redirect=permanent]
RewriteRule ^projects/ftf/form(.*) /contact/contact$1#ftf [NE,redirect=permanent]

## /projects/fla directory
RewriteRule ^projects/fla/(.*) /projects/ftf/$1 [redirect=permanent]

# Redirects to reduce 404's
RewriteRule ^en/layout/set/rss/content/view/full/5116 http://blogs.fsfe.org/ciaran/?feed=rss2 [redirect=permanent]
RewriteRule ^en/layout/set/rss/content/view/full/5009 http://blogs.fsfe.org/maffulli/?feed=rss2 [redirect=permanent]
RewriteRule ^en/layout/set/rss/content/view/full/4972 http://blogs.fsfe.org/gerloff/?feed=rss2 [redirect=permanent]
RewriteRule ^en/layout/set/rss/content/view/full/5971 http://blogs.fsfe.org/jj/?feed=rss2 [redirect=permanent]
RewriteRule ^en/layout/set/rss/content/view/full/6128 http://blogs.fsfe.org/jj/?feed=rss2 [redirect=permanent]
RewriteRule ^en/layout/set/rss/content/view/full/4974 http://blogs.fsfe.org/greve/?feed=rss2 [redirect=permanent]
RewriteRule ^en/news http://fsfe.org/news/ [redirect=permanent]
RewriteRule ^people/greve /about/greve/ [redirect=permanent]
RewriteRule ^projects/fellowship http://fellowship.fsfe.org [redirect=permanent]
RewriteRule ^en/rss/feed/news.xml /news/news.en.rss [redirect=permanent]
RewriteRule ^en/rss/feed/events.xml /events/events.en.rss  [redirect=permanent]
RewriteRule ^news/fsfe-fr-channel.fr.xml /news/news.fr.rss [redirect=permanent]
